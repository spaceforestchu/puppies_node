/* ========================================
@preserve
NOTICE
Plug-ins contained in this file under MIT
license retain that license, copyright
of the plug-in is attributed to the
individual Author. Modifications made to any
plug-in in this file is copyright of
Vidal Themes, these modifications are licensed
under ENVATO'S REGULAR/EXTENDED LICENSE and may
NOT be re-distributed.
======================================== */
/* ========================================
@preserve
04. GMaps.js v0.4.22
http://hpneo.github.com/gmaps/
Copyright 2016, Gustavo Leon
Released under the MIT License.
======================================== */
"use strict";/* ========================================
@preserve
01. CSS3 Animate it
Copyright (c) 2014 Jack McCourt
https://github.com/kriegar/css3-animate-it
Version: 0.1.0
======================================== */
!function($){function process(){check_lock=!1;for(var index=0;index<selectors.length;index++){var $appeared=$(selectors[index]).filter(function(){return $(this).is(":appeared")});if($appeared.trigger("appear",[$appeared]),$prior_appeared){var $disappeared=$prior_appeared.not($appeared);$disappeared.trigger("disappear",[$disappeared])}$prior_appeared=$appeared}}var selectors=[],check_binded=!1,check_lock=!1,defaults={interval:250,force_process:!1},$window=$(window),$prior_appeared;$.expr[":"].appeared=function(element){var $element=$(element);if(!$element.is(":visible"))return!1;var window_left=$window.scrollLeft(),window_top=$window.scrollTop(),offset=$element.offset(),left=offset.left,top=offset.top;return top+$element.height()>=window_top&&top-($element.data("appear-top-offset")||0)<=window_top+$window.height()&&left+$element.width()>=window_left&&left-($element.data("appear-left-offset")||0)<=window_left+$window.width()},$.fn.extend({appear:function(options){var opts=$.extend({},defaults,options||{}),selector=this.selector||this;if(!check_binded){var on_check=function(){check_lock||(check_lock=!0,setTimeout(process,opts.interval))};$(window).scroll(on_check).resize(on_check),check_binded=!0}return opts.force_process&&setTimeout(process,opts.interval),selectors.push(selector),$(selector)}}),$.extend({force_appear:function(){return check_binded?(process(),!0):!1}})}(jQuery),function($){"$:nomunge";function p_doTimeout(jquery_data_key){function cleanup(){jquery_data_key?elem.removeData(jquery_data_key):id&&delete cache[id]}function actually_setTimeout(){data.id=setTimeout(function(){data.fn()},delay)}var that=this,elem,data={},method_base=jquery_data_key?$.fn:$,args=arguments,slice_args=4,id=args[1],delay=args[2],callback=args[3];if("string"!=typeof id&&(slice_args--,id=jquery_data_key=0,delay=args[1],callback=args[2]),jquery_data_key?(elem=that.eq(0),elem.data(jquery_data_key,data=elem.data(jquery_data_key)||{})):id&&(data=cache[id]||(cache[id]={})),delete data.id,callback)data.fn=function(no_polling_loop){"string"==typeof callback&&(callback=method_base[callback]),callback.apply(that,aps.call(args,slice_args))!==!0||no_polling_loop?cleanup():actually_setTimeout()},actually_setTimeout();else{if(data.fn)return!0;cleanup()}}var cache={},doTimeout="doTimeout",aps=Array.prototype.slice;$[doTimeout]=function(){return p_doTimeout.apply(window,[0].concat(aps.call(arguments)))},$.fn[doTimeout]=function(){var args=aps.call(arguments),result=p_doTimeout.apply(this,[doTimeout+args[0]].concat(args));return"number"==typeof args[0]||"number"==typeof args[1]?this:result}}(jQuery),$(window).on("load",function(){$(".animated-parent").appear(),$(".animate-on-click").on("click",function(){var target=$(this).attr("data-target");if(void 0!==$(this).attr("data-sequence")){var firstId=$("."+target+":first").attr("data-id"),lastId=$("."+target+":last").attr("data-id"),number=firstId;$("."+target+"[data-id="+number+"]").hasClass("go")?($("."+target+"[data-id="+number+"]").addClass("goAway"),$("."+target+"[data-id="+number+"]").removeClass("go")):($("."+target+"[data-id="+number+"]").addClass("go"),$("."+target+"[data-id="+number+"]").removeClass("goAway")),number++,delay=Number($(this).attr("data-sequence")),$.doTimeout(delay,function(){return $("."+target+"[data-id="+number+"]").hasClass("go")?($("."+target+"[data-id="+number+"]").addClass("goAway"),$("."+target+"[data-id="+number+"]").removeClass("go")):($("."+target+"[data-id="+number+"]").addClass("go"),$("."+target+"[data-id="+number+"]").removeClass("goAway")),++number,lastId>=number?!0:void 0})}else $("."+target).hasClass("go")?($("."+target).addClass("goAway"),$("."+target).removeClass("go")):($("."+target).addClass("go"),$("."+target).removeClass("goAway"))}),$(document.body).on("appear",".animated-parent",function(){var ele=$(this).find(".animated"),parent=$(this);if(void 0!==parent.attr("data-sequence")){var firstId=$(this).find(".animated:first").attr("data-id"),number=firstId,lastId=$(this).find(".animated:last").attr("data-id");$(parent).find(".animated[data-id="+number+"]").addClass("go"),number++,delay=Number(parent.attr("data-sequence")),$.doTimeout(delay,function(){return $(parent).find(".animated[data-id="+number+"]").addClass("go"),++number,lastId>=number?!0:void 0})}else ele.addClass("go")})}),$(document.body).on("disappear",".animated-parent",function(){$(this).hasClass("animate-once")||$(this).find(".animated").removeClass("go")}),$(window).on("load",function(){$.force_appear()}),/* ========================================
@preserve
Simple JavaScript Inheritance
By John Resig http://ejohn.org/
MIT Licensed.
======================================== */
function(){var initializing=!1;window.JQClass=function(){},JQClass.classes={},JQClass.extend=function extender(prop){function JQClass(){!initializing&&this._init&&this._init.apply(this,arguments)}var base=this.prototype;initializing=!0;var prototype=new this;initializing=!1;for(var name in prop)prototype[name]="function"==typeof prop[name]&&"function"==typeof base[name]?function(name,fn){return function(){var __super=this._super;this._super=function(args){return base[name].apply(this,args||[])};var ret=fn.apply(this,arguments);return this._super=__super,ret}}(name,prop[name]):prop[name];return JQClass.prototype=prototype,JQClass.prototype.constructor=JQClass,JQClass.extend=extender,JQClass}}(),function($){function camelCase(name){return name.replace(/-([a-z])/g,function(match,group){return group.toUpperCase()})}JQClass.classes.JQPlugin=JQClass.extend({name:"plugin",defaultOptions:{},regionalOptions:{},_getters:[],_getMarker:function(){return"is-"+this.name},_init:function(){$.extend(this.defaultOptions,this.regionalOptions&&this.regionalOptions[""]||{});var jqName=camelCase(this.name);$[jqName]=this,$.fn[jqName]=function(options){var otherArgs=Array.prototype.slice.call(arguments,1);return $[jqName]._isNotChained(options,otherArgs)?$[jqName][options].apply($[jqName],[this[0]].concat(otherArgs)):this.each(function(){if("string"==typeof options){if("_"===options[0]||!$[jqName][options])throw"Unknown method: "+options;$[jqName][options].apply($[jqName],[this].concat(otherArgs))}else $[jqName]._attach(this,options)})}},setDefaults:function(options){$.extend(this.defaultOptions,options||{})},_isNotChained:function(name,otherArgs){return"option"===name&&(0===otherArgs.length||1===otherArgs.length&&"string"==typeof otherArgs[0])?!0:$.inArray(name,this._getters)>-1},_attach:function(elem,options){if(elem=$(elem),!elem.hasClass(this._getMarker())){elem.addClass(this._getMarker()),options=$.extend({},this.defaultOptions,this._getMetadata(elem),options||{});var inst=$.extend({name:this.name,elem:elem,options:options},this._instSettings(elem,options));elem.data(this.name,inst),this._postAttach(elem,inst),this.option(elem,options)}},_instSettings:function(elem,options){return{}},_postAttach:function(elem,inst){},_getMetadata:function(elem){try{var data=elem.data(this.name.toLowerCase())||"";data=data.replace(/'/g,'"'),data=data.replace(/([a-zA-Z0-9]+):/g,function(match,group,i){var count=data.substring(0,i).match(/"/g);return count&&count.length%2!==0?group+":":'"'+group+'":'}),data=$.parseJSON("{"+data+"}");for(var name in data){var value=data[name];"string"==typeof value&&value.match(/^new Date\((.*)\)$/)&&(data[name]=eval(value))}return data}catch(e){return{}}},_getInst:function(elem){return $(elem).data(this.name)||{}},option:function(elem,name,value){elem=$(elem);var inst=elem.data(this.name);if(!name||"string"==typeof name&&null===value){var options=(inst||{}).options;return options&&name?options[name]:options}if(elem.hasClass(this._getMarker())){var options=name||{};"string"==typeof name&&(options={},options[name]=value),this._optionsChanged(elem,inst,options),$.extend(inst.options,options)}},_optionsChanged:function(elem,inst,options){},destroy:function(elem){elem=$(elem),elem.hasClass(this._getMarker())&&(this._preDestroy(elem,this._getInst(elem)),elem.removeData(this.name).removeClass(this._getMarker()))},_preDestroy:function(elem,inst){}}),$.JQPlugin={createPlugin:function(superClass,overrides){"object"==typeof superClass&&(overrides=superClass,superClass="JQPlugin"),superClass=camelCase(superClass);var className=camelCase(overrides.name);JQClass.classes[className]=JQClass.classes[superClass].extend(overrides),new JQClass.classes[className]}}}(jQuery),/* ========================================
@preserve
http://keith-wood.name/countdown.html
02. Countdown for jQuery v2.0.2.
Written by Keith Wood (kbwood{at}iinet.com.au) January 2008.
Available under the MIT (http://keith-wood.name/licence.html) license.
Please attribute the author if you use it.
======================================== */
function($){var pluginName="countdown",Y=0,O=1,W=2,D=3,H=4,M=5,S=6;$.JQPlugin.createPlugin({name:pluginName,defaultOptions:{until:null,since:null,timezone:null,serverSync:null,format:"dHMS",layout:"",compact:!1,padZeroes:!1,significant:0,description:"",expiryUrl:"",expiryText:"",alwaysExpire:!1,onExpiry:null,onTick:null,tickInterval:1},regionalOptions:{"":{labels:["Years","Months","Weeks","Days","Hours","Minutes","Seconds"],labels1:["Year","Month","Week","Day","Hour","Minute","Second"],compactLabels:["y","m","w","d"],whichLabels:null,digits:["0","1","2","3","4","5","6","7","8","9"],timeSeparator:":",isRTL:!1}},_getters:["getTimes"],_rtlClass:pluginName+"-rtl",_sectionClass:pluginName+"-section",_amountClass:pluginName+"-amount",_periodClass:pluginName+"-period",_rowClass:pluginName+"-row",_holdingClass:pluginName+"-holding",_showClass:pluginName+"-show",_descrClass:pluginName+"-descr",_timerElems:[],_init:function(){function timerCallBack(timestamp){var drawStart=1e12>timestamp?perfAvail?performance.now()+performance.timing.navigationStart:now():timestamp||now();drawStart-animationStartTime>=1e3&&(self._updateElems(),animationStartTime=drawStart),requestAnimationFrame(timerCallBack)}var self=this;this._super(),this._serverSyncs=[];var now="function"==typeof Date.now?Date.now:function(){return(new Date).getTime()},perfAvail=window.performance&&"function"==typeof window.performance.now,requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||null,animationStartTime=0;!requestAnimationFrame||$.noRequestAnimationFrame?($.noRequestAnimationFrame=null,setInterval(function(){self._updateElems()},980)):(animationStartTime=window.animationStartTime||window.webkitAnimationStartTime||window.mozAnimationStartTime||window.oAnimationStartTime||window.msAnimationStartTime||now(),requestAnimationFrame(timerCallBack))},UTCDate:function(tz,year,month,day,hours,mins,secs,ms){"object"==typeof year&&year.constructor===Date&&(ms=year.getMilliseconds(),secs=year.getSeconds(),mins=year.getMinutes(),hours=year.getHours(),day=year.getDate(),month=year.getMonth(),year=year.getFullYear());var d=new Date;return d.setUTCFullYear(year),d.setUTCDate(1),d.setUTCMonth(month||0),d.setUTCDate(day||1),d.setUTCHours(hours||0),d.setUTCMinutes((mins||0)-(Math.abs(tz)<30?60*tz:tz)),d.setUTCSeconds(secs||0),d.setUTCMilliseconds(ms||0),d},periodsToSeconds:function(periods){return 31557600*periods[0]+2629800*periods[1]+604800*periods[2]+86400*periods[3]+3600*periods[4]+60*periods[5]+periods[6]},resync:function(){var self=this;$("."+this._getMarker()).each(function(){var inst=$.data(this,self.name);if(inst.options.serverSync){for(var serverSync=null,i=0;i<self._serverSyncs.length;i++)if(self._serverSyncs[i][0]===inst.options.serverSync){serverSync=self._serverSyncs[i];break}if(null===serverSync[2]){var serverResult=$.isFunction(inst.options.serverSync)?inst.options.serverSync.apply(this,[]):null;serverSync[2]=(serverResult?(new Date).getTime()-serverResult.getTime():0)-serverSync[1]}inst._since&&inst._since.setMilliseconds(inst._since.getMilliseconds()+serverSync[2]),inst._until.setMilliseconds(inst._until.getMilliseconds()+serverSync[2])}});for(var i=0;i<self._serverSyncs.length;i++)null!==self._serverSyncs[i][2]&&(self._serverSyncs[i][1]+=self._serverSyncs[i][2],delete self._serverSyncs[i][2])},_instSettings:function(elem,options){return{_periods:[0,0,0,0,0,0,0]}},_addElem:function(elem){this._hasElem(elem)||this._timerElems.push(elem)},_hasElem:function(elem){return $.inArray(elem,this._timerElems)>-1},_removeElem:function(elem){this._timerElems=$.map(this._timerElems,function(value){return value===elem?null:value})},_updateElems:function(){for(var i=this._timerElems.length-1;i>=0;i--)this._updateCountdown(this._timerElems[i])},_optionsChanged:function(elem,inst,options){options.layout&&(options.layout=options.layout.replace(/&lt;/g,"<").replace(/&gt;/g,">")),this._resetExtraLabels(inst.options,options);var timezoneChanged=inst.options.timezone!==options.timezone;$.extend(inst.options,options),this._adjustSettings(elem,inst,null!==options.until||null!==options.since||timezoneChanged);var now=new Date;(inst._since&&inst._since<now||inst._until&&inst._until>now)&&this._addElem(elem[0]),this._updateCountdown(elem,inst)},_updateCountdown:function(elem,inst){if(elem=elem.jquery?elem:$(elem),inst=inst||this._getInst(elem)){if(elem.html(this._generateHTML(inst)).toggleClass(this._rtlClass,inst.options.isRTL),$.isFunction(inst.options.onTick)){var periods="lap"!==inst._hold?inst._periods:this._calculatePeriods(inst,inst._show,inst.options.significant,new Date);1!==inst.options.tickInterval&&this.periodsToSeconds(periods)%inst.options.tickInterval!==0||inst.options.onTick.apply(elem[0],[periods])}var expired="pause"!==inst._hold&&(inst._since?inst._now.getTime()<inst._since.getTime():inst._now.getTime()>=inst._until.getTime());if(expired&&!inst._expiring){if(inst._expiring=!0,this._hasElem(elem[0])||inst.options.alwaysExpire){if(this._removeElem(elem[0]),$.isFunction(inst.options.onExpiry)&&inst.options.onExpiry.apply(elem[0],[]),inst.options.expiryText){var layout=inst.options.layout;inst.options.layout=inst.options.expiryText,this._updateCountdown(elem[0],inst),inst.options.layout=layout}inst.options.expiryUrl&&(window.location=inst.options.expiryUrl)}inst._expiring=!1}else"pause"===inst._hold&&this._removeElem(elem[0])}},_resetExtraLabels:function(base,options){for(var n in options)n.match(/[Ll]abels[02-9]|compactLabels1/)&&(base[n]=options[n]);for(var n in base)n.match(/[Ll]abels[02-9]|compactLabels1/)&&"undefined"==typeof options[n]&&(base[n]=null)},_adjustSettings:function(elem,inst,recalc){for(var serverEntry=null,i=0;i<this._serverSyncs.length;i++)if(this._serverSyncs[i][0]===inst.options.serverSync){serverEntry=this._serverSyncs[i][1];break}if(null!==serverEntry)var serverOffset=inst.options.serverSync?serverEntry:0,now=new Date;else{var serverResult=$.isFunction(inst.options.serverSync)?inst.options.serverSync.apply(elem[0],[]):null,now=new Date,serverOffset=serverResult?now.getTime()-serverResult.getTime():0;this._serverSyncs.push([inst.options.serverSync,serverOffset])}var timezone=inst.options.timezone;timezone=null===timezone?-now.getTimezoneOffset():timezone,(recalc||!recalc&&null===inst._until&&null===inst._since)&&(inst._since=inst.options.since,null!==inst._since&&(inst._since=this.UTCDate(timezone,this._determineTime(inst._since,null)),inst._since&&serverOffset&&inst._since.setMilliseconds(inst._since.getMilliseconds()+serverOffset)),inst._until=this.UTCDate(timezone,this._determineTime(inst.options.until,now)),serverOffset&&inst._until.setMilliseconds(inst._until.getMilliseconds()+serverOffset)),inst._show=this._determineShow(inst)},_preDestroy:function(elem,inst){this._removeElem(elem[0]),elem.empty()},pause:function(elem){this._hold(elem,"pause")},lap:function(elem){this._hold(elem,"lap")},resume:function(elem){this._hold(elem,null)},toggle:function(elem){var inst=$.data(elem,this.name)||{};this[inst._hold?"resume":"pause"](elem)},toggleLap:function(elem){var inst=$.data(elem,this.name)||{};this[inst._hold?"resume":"lap"](elem)},_hold:function(elem,hold){var inst=$.data(elem,this.name);if(inst){if("pause"===inst._hold&&!hold){inst._periods=inst._savePeriods;var sign=inst._since?"-":"+";inst[inst._since?"_since":"_until"]=this._determineTime(sign+inst._periods[0]+"y"+sign+inst._periods[1]+"o"+sign+inst._periods[2]+"w"+sign+inst._periods[3]+"d"+sign+inst._periods[4]+"h"+sign+inst._periods[5]+"m"+sign+inst._periods[6]+"s"),this._addElem(elem)}inst._hold=hold,inst._savePeriods="pause"===hold?inst._periods:null,$.data(elem,this.name,inst),this._updateCountdown(elem,inst)}},getTimes:function(elem){var inst=$.data(elem,this.name);return inst?"pause"===inst._hold?inst._savePeriods:inst._hold?this._calculatePeriods(inst,inst._show,inst.options.significant,new Date):inst._periods:null},_determineTime:function(setting,defaultTime){var self=this,offsetNumeric=function(offset){var time=new Date;return time.setTime(time.getTime()+1e3*offset),time},offsetString=function(offset){offset=offset.toLowerCase();for(var time=new Date,year=time.getFullYear(),month=time.getMonth(),day=time.getDate(),hour=time.getHours(),minute=time.getMinutes(),second=time.getSeconds(),pattern=/([+-]?[0-9]+)\s*(s|m|h|d|w|o|y)?/g,matches=pattern.exec(offset);matches;){switch(matches[2]||"s"){case"s":second+=parseInt(matches[1],10);break;case"m":minute+=parseInt(matches[1],10);break;case"h":hour+=parseInt(matches[1],10);break;case"d":day+=parseInt(matches[1],10);break;case"w":day+=7*parseInt(matches[1],10);break;case"o":month+=parseInt(matches[1],10),day=Math.min(day,self._getDaysInMonth(year,month));break;case"y":year+=parseInt(matches[1],10),day=Math.min(day,self._getDaysInMonth(year,month))}matches=pattern.exec(offset)}return new Date(year,month,day,hour,minute,second,0)},time=null===setting?defaultTime:"string"==typeof setting?offsetString(setting):"number"==typeof setting?offsetNumeric(setting):setting;return time&&time.setMilliseconds(0),time},_getDaysInMonth:function(year,month){return 32-new Date(year,month,32).getDate()},_normalLabels:function(num){return num},_generateHTML:function(inst){var self=this;inst._periods=inst._hold?inst._periods:this._calculatePeriods(inst,inst._show,inst.options.significant,new Date);for(var shownNonZero=!1,showCount=0,sigCount=inst.options.significant,show=$.extend({},inst._show),period=Y;S>=period;period++)shownNonZero|="?"===inst._show[period]&&inst._periods[period]>0,show[period]="?"!==inst._show[period]||shownNonZero?inst._show[period]:null,showCount+=show[period]?1:0,sigCount-=inst._periods[period]>0?1:0;for(var showSignificant=[!1,!1,!1,!1,!1,!1,!1],period=S;period>=Y;period--)inst._show[period]&&(inst._periods[period]?showSignificant[period]=!0:(showSignificant[period]=sigCount>0,sigCount--));var labels=inst.options.compact?inst.options.compactLabels:inst.options.labels,whichLabels=inst.options.whichLabels||this._normalLabels,showCompact=function(period){var labelsNum=inst.options["compactLabels"+whichLabels(inst._periods[period])];return show[period]?self._translateDigits(inst,inst._periods[period])+(labelsNum?labelsNum[period]:labels[period])+" ":""},minDigits=inst.options.padZeroes?2:1,showFull=function(period){var labelsNum=inst.options["labels"+whichLabels(inst._periods[period])];return!inst.options.significant&&show[period]||inst.options.significant&&showSignificant[period]?'<span class="'+self._sectionClass+'"><span class="'+self._amountClass+'">'+self._minDigits(inst,inst._periods[period],minDigits)+'</span><span class="'+self._periodClass+'">'+(labelsNum?labelsNum[period]:labels[period])+"</span></span>":""};return inst.options.layout?this._buildLayout(inst,show,inst.options.layout,inst.options.compact,inst.options.significant,showSignificant):(inst.options.compact?'<span class="'+this._rowClass+" "+this._amountClass+(inst._hold?" "+this._holdingClass:"")+'">'+showCompact(Y)+showCompact(O)+showCompact(W)+showCompact(D)+(show[H]?this._minDigits(inst,inst._periods[H],2):"")+(show[M]?(show[H]?inst.options.timeSeparator:"")+this._minDigits(inst,inst._periods[M],2):"")+(show[S]?(show[H]||show[M]?inst.options.timeSeparator:"")+this._minDigits(inst,inst._periods[S],2):""):'<span class="'+this._rowClass+" "+this._showClass+(inst.options.significant||showCount)+(inst._hold?" "+this._holdingClass:"")+'">'+showFull(Y)+showFull(O)+showFull(W)+showFull(D)+showFull(H)+showFull(M)+showFull(S))+"</span>"+(inst.options.description?'<span class="'+this._rowClass+" "+this._descrClass+'">'+inst.options.description+"</span>":"")},_buildLayout:function(inst,show,layout,compact,significant,showSignificant){for(var labels=inst.options[compact?"compactLabels":"labels"],whichLabels=inst.options.whichLabels||this._normalLabels,labelFor=function(index){return(inst.options[(compact?"compactLabels":"labels")+whichLabels(inst._periods[index])]||labels)[index]},digit=function(value,position){return inst.options.digits[Math.floor(value/position)%10]},subs={desc:inst.options.description,sep:inst.options.timeSeparator,yl:labelFor(Y),yn:this._minDigits(inst,inst._periods[Y],1),ynn:this._minDigits(inst,inst._periods[Y],2),ynnn:this._minDigits(inst,inst._periods[Y],3),y1:digit(inst._periods[Y],1),y10:digit(inst._periods[Y],10),y100:digit(inst._periods[Y],100),y1000:digit(inst._periods[Y],1e3),ol:labelFor(O),on:this._minDigits(inst,inst._periods[O],1),onn:this._minDigits(inst,inst._periods[O],2),onnn:this._minDigits(inst,inst._periods[O],3),o1:digit(inst._periods[O],1),o10:digit(inst._periods[O],10),o100:digit(inst._periods[O],100),o1000:digit(inst._periods[O],1e3),wl:labelFor(W),wn:this._minDigits(inst,inst._periods[W],1),wnn:this._minDigits(inst,inst._periods[W],2),wnnn:this._minDigits(inst,inst._periods[W],3),w1:digit(inst._periods[W],1),w10:digit(inst._periods[W],10),w100:digit(inst._periods[W],100),w1000:digit(inst._periods[W],1e3),dl:labelFor(D),dn:this._minDigits(inst,inst._periods[D],1),dnn:this._minDigits(inst,inst._periods[D],2),dnnn:this._minDigits(inst,inst._periods[D],3),d1:digit(inst._periods[D],1),d10:digit(inst._periods[D],10),d100:digit(inst._periods[D],100),d1000:digit(inst._periods[D],1e3),hl:labelFor(H),hn:this._minDigits(inst,inst._periods[H],1),hnn:this._minDigits(inst,inst._periods[H],2),hnnn:this._minDigits(inst,inst._periods[H],3),h1:digit(inst._periods[H],1),h10:digit(inst._periods[H],10),h100:digit(inst._periods[H],100),h1000:digit(inst._periods[H],1e3),ml:labelFor(M),mn:this._minDigits(inst,inst._periods[M],1),mnn:this._minDigits(inst,inst._periods[M],2),mnnn:this._minDigits(inst,inst._periods[M],3),m1:digit(inst._periods[M],1),m10:digit(inst._periods[M],10),m100:digit(inst._periods[M],100),m1000:digit(inst._periods[M],1e3),sl:labelFor(S),sn:this._minDigits(inst,inst._periods[S],1),snn:this._minDigits(inst,inst._periods[S],2),snnn:this._minDigits(inst,inst._periods[S],3),s1:digit(inst._periods[S],1),s10:digit(inst._periods[S],10),s100:digit(inst._periods[S],100),s1000:digit(inst._periods[S],1e3)},html=layout,i=Y;S>=i;i++){var period="yowdhms".charAt(i),re=new RegExp("\\{"+period+"<\\}([\\s\\S]*)\\{"+period+">\\}","g");html=html.replace(re,!significant&&show[i]||significant&&showSignificant[i]?"$1":"")}return $.each(subs,function(n,v){var re=new RegExp("\\{"+n+"\\}","g");html=html.replace(re,v)}),html},_minDigits:function(inst,value,len){return value=""+value,value.length>=len?this._translateDigits(inst,value):(value="0000000000"+value,this._translateDigits(inst,value.substr(value.length-len)))},_translateDigits:function(inst,value){return(""+value).replace(/[0-9]/g,function(digit){return inst.options.digits[digit]})},_determineShow:function(inst){var format=inst.options.format,show=[];return show[Y]=format.match("y")?"?":format.match("Y")?"!":null,show[O]=format.match("o")?"?":format.match("O")?"!":null,show[W]=format.match("w")?"?":format.match("W")?"!":null,show[D]=format.match("d")?"?":format.match("D")?"!":null,show[H]=format.match("h")?"?":format.match("H")?"!":null,show[M]=format.match("m")?"?":format.match("M")?"!":null,show[S]=format.match("s")?"?":format.match("S")?"!":null,show},_calculatePeriods:function(inst,show,significant,now){inst._now=now,inst._now.setMilliseconds(0);var until=new Date(inst._now.getTime());inst._since?now.getTime()<inst._since.getTime()?inst._now=now=until:now=inst._since:(until.setTime(inst._until.getTime()),now.getTime()>inst._until.getTime()&&(inst._now=now=until));var periods=[0,0,0,0,0,0,0];if(show[Y]||show[O]){var lastNow=this._getDaysInMonth(now.getFullYear(),now.getMonth()),lastUntil=this._getDaysInMonth(until.getFullYear(),until.getMonth()),sameDay=until.getDate()===now.getDate()||until.getDate()>=Math.min(lastNow,lastUntil)&&now.getDate()>=Math.min(lastNow,lastUntil),getSecs=function(date){return 60*(60*date.getHours()+date.getMinutes())+date.getSeconds()},months=Math.max(0,12*(until.getFullYear()-now.getFullYear())+until.getMonth()-now.getMonth()+(until.getDate()<now.getDate()&&!sameDay||sameDay&&getSecs(until)<getSecs(now)?-1:0));periods[Y]=show[Y]?Math.floor(months/12):0,periods[O]=show[O]?months-12*periods[Y]:0,now=new Date(now.getTime());var wasLastDay=now.getDate()===lastNow,lastDay=this._getDaysInMonth(now.getFullYear()+periods[Y],now.getMonth()+periods[O]);now.getDate()>lastDay&&now.setDate(lastDay),now.setFullYear(now.getFullYear()+periods[Y]),now.setMonth(now.getMonth()+periods[O]),wasLastDay&&now.setDate(lastDay)}var diff=Math.floor((until.getTime()-now.getTime())/1e3),extractPeriod=function(period,numSecs){periods[period]=show[period]?Math.floor(diff/numSecs):0,diff-=periods[period]*numSecs};if(extractPeriod(W,604800),extractPeriod(D,86400),extractPeriod(H,3600),extractPeriod(M,60),extractPeriod(S,1),diff>0&&!inst._since)for(var multiplier=[1,12,4.3482,7,24,60,60],lastShown=S,max=1,period=S;period>=Y;period--)show[period]&&(periods[lastShown]>=max&&(periods[lastShown]=0,diff=1),diff>0&&(periods[period]++,diff=0,lastShown=period,max=1)),max*=multiplier[period];if(significant)for(var period=Y;S>=period;period++)significant&&periods[period]?significant--:significant||(periods[period]=0);return periods}})}(jQuery),/* ========================================
@preserve
03. Isotope used and distributed under
Commercial License
Isotope PACKAGED v3.0.0
Licensed GPLv3 for open source use
or Isotope Commercial License for commercial use
http://isotope.metafizzy.co
Copyright 2016 Metafizzy
Bridget makes jQuery widgets
v2.0.0
MIT license
======================================== */
function(window,factory){"function"==typeof define&&define.amd?define("jquery-bridget/jquery-bridget",["jquery"],function(jQuery){factory(window,jQuery)}):"object"==typeof module&&module.exports?module.exports=factory(window,require("jquery")):window.jQueryBridget=factory(window,window.jQuery)}(window,function factory(window,jQuery){function jQueryBridget(namespace,PluginClass,$){function methodCall($elems,methodName,args){var returnValue,pluginMethodStr="$()."+namespace+'("'+methodName+'")';return $elems.each(function(i,elem){var instance=$.data(elem,namespace);if(!instance)return void logError(namespace+" not initialized. Cannot call methods, i.e. "+pluginMethodStr);var method=instance[methodName];if(!method||"_"==methodName.charAt(0))return void logError(pluginMethodStr+" is not a valid method");var value=method.apply(instance,args);returnValue=void 0===returnValue?value:returnValue}),void 0!==returnValue?returnValue:$elems}function plainCall($elems,options){$elems.each(function(i,elem){var instance=$.data(elem,namespace);instance?(instance.option(options),instance._init()):(instance=new PluginClass(elem,options),$.data(elem,namespace,instance))})}$=$||jQuery||window.jQuery,$&&(PluginClass.prototype.option||(PluginClass.prototype.option=function(opts){$.isPlainObject(opts)&&(this.options=$.extend(!0,this.options,opts))}),$.fn[namespace]=function(arg0){if("string"==typeof arg0){var args=arraySlice.call(arguments,1);return methodCall(this,arg0,args)}return plainCall(this,arg0),this},updateJQuery($))}function updateJQuery($){!$||$&&$.bridget||($.bridget=jQueryBridget)}var arraySlice=Array.prototype.slice,console=window.console,logError="undefined"==typeof console?function(){}:function(message){console.error(message)};return updateJQuery(jQuery||window.jQuery),jQueryBridget}),function(global,factory){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",factory):"object"==typeof module&&module.exports?module.exports=factory():global.EvEmitter=factory()}("undefined"!=typeof window?window:this,function(){function EvEmitter(){}var proto=EvEmitter.prototype;return proto.on=function(eventName,listener){if(eventName&&listener){var events=this._events=this._events||{},listeners=events[eventName]=events[eventName]||[];return-1==listeners.indexOf(listener)&&listeners.push(listener),this}},proto.once=function(eventName,listener){if(eventName&&listener){this.on(eventName,listener);var onceEvents=this._onceEvents=this._onceEvents||{},onceListeners=onceEvents[eventName]=onceEvents[eventName]||{};return onceListeners[listener]=!0,this}},proto.off=function(eventName,listener){var listeners=this._events&&this._events[eventName];if(listeners&&listeners.length){var index=listeners.indexOf(listener);return-1!=index&&listeners.splice(index,1),this}},proto.emitEvent=function(eventName,args){var listeners=this._events&&this._events[eventName];if(listeners&&listeners.length){var i=0,listener=listeners[i];args=args||[];for(var onceListeners=this._onceEvents&&this._onceEvents[eventName];listener;){var isOnce=onceListeners&&onceListeners[listener];isOnce&&(this.off(eventName,listener),delete onceListeners[listener]),listener.apply(this,args),i+=isOnce?0:1,listener=listeners[i]}return this}},EvEmitter}),function(window,factory){"function"==typeof define&&define.amd?define("get-size/get-size",[],function(){return factory()}):"object"==typeof module&&module.exports?module.exports=factory():window.getSize=factory()}(window,function factory(){function getStyleSize(value){var num=parseFloat(value),isValid=-1==value.indexOf("%")&&!isNaN(num);return isValid&&num}function noop(){}function getZeroSize(){for(var size={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},i=0;measurementsLength>i;i++){var measurement=measurements[i];size[measurement]=0}return size}function getStyle(elem){var style=getComputedStyle(elem);return style||logError("Style returned "+style+". Are you running this code in a hidden iframe on Firefox? See http://bit.ly/getsizebug1"),style}function setup(){if(!isSetup){isSetup=!0;var div=document.createElement("div");div.style.width="200px",div.style.padding="1px 2px 3px 4px",div.style.borderStyle="solid",div.style.borderWidth="1px 2px 3px 4px",div.style.boxSizing="border-box";var body=document.body||document.documentElement;body.appendChild(div);var style=getStyle(div);getSize.isBoxSizeOuter=isBoxSizeOuter=200==getStyleSize(style.width),body.removeChild(div)}}function getSize(elem){if(setup(),"string"==typeof elem&&(elem=document.querySelector(elem)),elem&&"object"==typeof elem&&elem.nodeType){var style=getStyle(elem);if("none"==style.display)return getZeroSize();var size={};size.width=elem.offsetWidth,size.height=elem.offsetHeight;for(var isBorderBox=size.isBorderBox="border-box"==style.boxSizing,i=0;measurementsLength>i;i++){var measurement=measurements[i],value=style[measurement],num=parseFloat(value);size[measurement]=isNaN(num)?0:num}var paddingWidth=size.paddingLeft+size.paddingRight,paddingHeight=size.paddingTop+size.paddingBottom,marginWidth=size.marginLeft+size.marginRight,marginHeight=size.marginTop+size.marginBottom,borderWidth=size.borderLeftWidth+size.borderRightWidth,borderHeight=size.borderTopWidth+size.borderBottomWidth,isBorderBoxSizeOuter=isBorderBox&&isBoxSizeOuter,styleWidth=getStyleSize(style.width);styleWidth!==!1&&(size.width=styleWidth+(isBorderBoxSizeOuter?0:paddingWidth+borderWidth));var styleHeight=getStyleSize(style.height);return styleHeight!==!1&&(size.height=styleHeight+(isBorderBoxSizeOuter?0:paddingHeight+borderHeight)),size.innerWidth=size.width-(paddingWidth+borderWidth),size.innerHeight=size.height-(paddingHeight+borderHeight),size.outerWidth=size.width+marginWidth,size.outerHeight=size.height+marginHeight,size}}var logError="undefined"==typeof console?noop:function(message){console.error(message)},measurements=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],measurementsLength=measurements.length,isSetup=!1,isBoxSizeOuter;return getSize}),function(window,factory){"function"==typeof define&&define.amd?define("desandro-matches-selector/matches-selector",factory):"object"==typeof module&&module.exports?module.exports=factory():window.matchesSelector=factory()}(window,function factory(){var matchesMethod=function(){var ElemProto=Element.prototype;if(ElemProto.matches)return"matches";if(ElemProto.matchesSelector)return"matchesSelector";for(var prefixes=["webkit","moz","ms","o"],i=0;i<prefixes.length;i++){var prefix=prefixes[i],method=prefix+"MatchesSelector";if(ElemProto[method])return method}}();return function matchesSelector(elem,selector){return elem[matchesMethod](selector)}}),function(window,factory){"function"==typeof define&&define.amd?define("fizzy-ui-utils/utils",["desandro-matches-selector/matches-selector"],function(matchesSelector){return factory(window,matchesSelector)}):"object"==typeof module&&module.exports?module.exports=factory(window,require("desandro-matches-selector")):window.fizzyUIUtils=factory(window,window.matchesSelector)}(window,function factory(window,matchesSelector){var utils={};utils.extend=function(a,b){for(var prop in b)a[prop]=b[prop];return a},utils.modulo=function(num,div){return(num%div+div)%div},utils.makeArray=function(obj){var ary=[];if(Array.isArray(obj))ary=obj;else if(obj&&"number"==typeof obj.length)for(var i=0;i<obj.length;i++)ary.push(obj[i]);else ary.push(obj);return ary},utils.removeFrom=function(ary,obj){var index=ary.indexOf(obj);-1!=index&&ary.splice(index,1)},utils.getParent=function(elem,selector){for(;elem!=document.body;)if(elem=elem.parentNode,matchesSelector(elem,selector))return elem},utils.getQueryElement=function(elem){return"string"==typeof elem?document.querySelector(elem):elem},utils.handleEvent=function(event){var method="on"+event.type;this[method]&&this[method](event)},utils.filterFindElements=function(elems,selector){elems=utils.makeArray(elems);var ffElems=[];return elems.forEach(function(elem){if(elem instanceof HTMLElement){if(!selector)return void ffElems.push(elem);matchesSelector(elem,selector)&&ffElems.push(elem);for(var childElems=elem.querySelectorAll(selector),i=0;i<childElems.length;i++)ffElems.push(childElems[i])}}),ffElems},utils.debounceMethod=function(_class,methodName,threshold){var method=_class.prototype[methodName],timeoutName=methodName+"Timeout";_class.prototype[methodName]=function(){var timeout=this[timeoutName];timeout&&clearTimeout(timeout);var args=arguments,_this=this;this[timeoutName]=setTimeout(function(){method.apply(_this,args),delete _this[timeoutName]},threshold||100)}},utils.docReady=function(callback){var readyState=document.readyState;"complete"==readyState||"interactive"==readyState?callback():document.addEventListener("DOMContentLoaded",callback)},utils.toDashed=function(str){return str.replace(/(.)([A-Z])/g,function(match,$1,$2){return $1+"-"+$2}).toLowerCase()};var console=window.console;return utils.htmlInit=function(WidgetClass,namespace){utils.docReady(function(){var dashedNamespace=utils.toDashed(namespace),dataAttr="data-"+dashedNamespace,dataAttrElems=document.querySelectorAll("["+dataAttr+"]"),jsDashElems=document.querySelectorAll(".js-"+dashedNamespace),elems=utils.makeArray(dataAttrElems).concat(utils.makeArray(jsDashElems)),dataOptionsAttr=dataAttr+"-options",jQuery=window.jQuery;elems.forEach(function(elem){var attr=elem.getAttribute(dataAttr)||elem.getAttribute(dataOptionsAttr),options;try{options=attr&&JSON.parse(attr)}catch(error){return void(console&&console.error("Error parsing "+dataAttr+" on "+elem.className+": "+error))}var instance=new WidgetClass(elem,options);jQuery&&jQuery.data(elem,namespace,instance)})})},utils}),function(window,factory){"function"==typeof define&&define.amd?define("outlayer/item",["ev-emitter/ev-emitter","get-size/get-size"],factory):"object"==typeof module&&module.exports?module.exports=factory(require("ev-emitter"),require("get-size")):(window.Outlayer={},window.Outlayer.Item=factory(window.EvEmitter,window.getSize))}(window,function factory(EvEmitter,getSize){function isEmptyObj(obj){for(var prop in obj)return!1;return prop=null,!0}function Item(element,layout){element&&(this.element=element,this.layout=layout,this.position={x:0,y:0},this._create())}function toDashedAll(str){return str.replace(/([A-Z])/g,function($1){return"-"+$1.toLowerCase()})}var docElemStyle=document.documentElement.style,transitionProperty="string"==typeof docElemStyle.transition?"transition":"WebkitTransition",transformProperty="string"==typeof docElemStyle.transform?"transform":"WebkitTransform",transitionEndEvent={WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[transitionProperty],vendorProperties={transform:transformProperty,transition:transitionProperty,transitionDuration:transitionProperty+"Duration",transitionProperty:transitionProperty+"Property",transitionDelay:transitionProperty+"Delay"},proto=Item.prototype=Object.create(EvEmitter.prototype);proto.constructor=Item,proto._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},proto.handleEvent=function(event){var method="on"+event.type;this[method]&&this[method](event)},proto.getSize=function(){this.size=getSize(this.element)},proto.css=function(style){var elemStyle=this.element.style;for(var prop in style){var supportedProp=vendorProperties[prop]||prop;elemStyle[supportedProp]=style[prop]}},proto.getPosition=function(){var style=getComputedStyle(this.element),isOriginLeft=this.layout._getOption("originLeft"),isOriginTop=this.layout._getOption("originTop"),xValue=style[isOriginLeft?"left":"right"],yValue=style[isOriginTop?"top":"bottom"],layoutSize=this.layout.size,x=-1!=xValue.indexOf("%")?parseFloat(xValue)/100*layoutSize.width:parseInt(xValue,10),y=-1!=yValue.indexOf("%")?parseFloat(yValue)/100*layoutSize.height:parseInt(yValue,10);x=isNaN(x)?0:x,y=isNaN(y)?0:y,x-=isOriginLeft?layoutSize.paddingLeft:layoutSize.paddingRight,y-=isOriginTop?layoutSize.paddingTop:layoutSize.paddingBottom,this.position.x=x,this.position.y=y},proto.layoutPosition=function(){var layoutSize=this.layout.size,style={},isOriginLeft=this.layout._getOption("originLeft"),isOriginTop=this.layout._getOption("originTop"),xPadding=isOriginLeft?"paddingLeft":"paddingRight",xProperty=isOriginLeft?"left":"right",xResetProperty=isOriginLeft?"right":"left",x=this.position.x+layoutSize[xPadding];style[xProperty]=this.getXValue(x),style[xResetProperty]="";var yPadding=isOriginTop?"paddingTop":"paddingBottom",yProperty=isOriginTop?"top":"bottom",yResetProperty=isOriginTop?"bottom":"top",y=this.position.y+layoutSize[yPadding];style[yProperty]=this.getYValue(y),style[yResetProperty]="",this.css(style),this.emitEvent("layout",[this])},proto.getXValue=function(x){var isHorizontal=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&!isHorizontal?x/this.layout.size.width*100+"%":x+"px"},proto.getYValue=function(y){var isHorizontal=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&isHorizontal?y/this.layout.size.height*100+"%":y+"px"},proto._transitionTo=function(x,y){this.getPosition();var curX=this.position.x,curY=this.position.y,compareX=parseInt(x,10),compareY=parseInt(y,10),didNotMove=compareX===this.position.x&&compareY===this.position.y;if(this.setPosition(x,y),didNotMove&&!this.isTransitioning)return void this.layoutPosition();var transX=x-curX,transY=y-curY,transitionStyle={};transitionStyle.transform=this.getTranslate(transX,transY),this.transition({to:transitionStyle,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})},proto.getTranslate=function(x,y){var isOriginLeft=this.layout._getOption("originLeft"),isOriginTop=this.layout._getOption("originTop");return x=isOriginLeft?x:-x,y=isOriginTop?y:-y,"translate3d("+x+"px, "+y+"px, 0)"},proto.goTo=function(x,y){this.setPosition(x,y),this.layoutPosition()},proto.moveTo=proto._transitionTo,proto.setPosition=function(x,y){this.position.x=parseInt(x,10),this.position.y=parseInt(y,10)},proto._nonTransition=function(args){this.css(args.to),args.isCleaning&&this._removeStyles(args.to);for(var prop in args.onTransitionEnd)args.onTransitionEnd[prop].call(this)},proto.transition=function(args){if(!parseFloat(this.layout.options.transitionDuration))return void this._nonTransition(args);var _transition=this._transn;for(var prop in args.onTransitionEnd)_transition.onEnd[prop]=args.onTransitionEnd[prop];for(prop in args.to)_transition.ingProperties[prop]=!0,args.isCleaning&&(_transition.clean[prop]=!0);if(args.from){this.css(args.from);var h=this.element.offsetHeight;h=null}this.enableTransition(args.to),this.css(args.to),this.isTransitioning=!0};var transitionProps="opacity,"+toDashedAll(transformProperty);proto.enableTransition=function(){if(!this.isTransitioning){var duration=this.layout.options.transitionDuration;duration="number"==typeof duration?duration+"ms":duration,this.css({transitionProperty:transitionProps,transitionDuration:duration,transitionDelay:this.staggerDelay||0}),this.element.addEventListener(transitionEndEvent,this,!1)}},proto.onwebkitTransitionEnd=function(event){this.ontransitionend(event)},proto.onotransitionend=function(event){this.ontransitionend(event)};var dashedVendorProperties={"-webkit-transform":"transform"};proto.ontransitionend=function(event){if(event.target===this.element){var _transition=this._transn,propertyName=dashedVendorProperties[event.propertyName]||event.propertyName;if(delete _transition.ingProperties[propertyName],isEmptyObj(_transition.ingProperties)&&this.disableTransition(),propertyName in _transition.clean&&(this.element.style[event.propertyName]="",delete _transition.clean[propertyName]),propertyName in _transition.onEnd){var onTransitionEnd=_transition.onEnd[propertyName];onTransitionEnd.call(this),delete _transition.onEnd[propertyName]}this.emitEvent("transitionEnd",[this])}},proto.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(transitionEndEvent,this,!1),this.isTransitioning=!1},proto._removeStyles=function(style){var cleanStyle={};for(var prop in style)cleanStyle[prop]="";this.css(cleanStyle)};var cleanTransitionStyle={transitionProperty:"",transitionDuration:"",transitionDelay:""};return proto.removeTransitionStyles=function(){this.css(cleanTransitionStyle)},proto.stagger=function(delay){delay=isNaN(delay)?0:delay,this.staggerDelay=delay+"ms"},proto.removeElem=function(){this.element.parentNode.removeChild(this.element),this.css({display:""}),this.emitEvent("remove",[this])},proto.remove=function(){return transitionProperty&&parseFloat(this.layout.options.transitionDuration)?(this.once("transitionEnd",function(){this.removeElem()}),void this.hide()):void this.removeElem()},proto.reveal=function(){delete this.isHidden,this.css({display:""});var options=this.layout.options,onTransitionEnd={},transitionEndProperty=this.getHideRevealTransitionEndProperty("visibleStyle");onTransitionEnd[transitionEndProperty]=this.onRevealTransitionEnd,this.transition({from:options.hiddenStyle,to:options.visibleStyle,isCleaning:!0,onTransitionEnd:onTransitionEnd})},proto.onRevealTransitionEnd=function(){this.isHidden||this.emitEvent("reveal")},proto.getHideRevealTransitionEndProperty=function(styleProperty){var optionStyle=this.layout.options[styleProperty];if(optionStyle.opacity)return"opacity";for(var prop in optionStyle)return prop},proto.hide=function(){this.isHidden=!0,this.css({display:""});var options=this.layout.options,onTransitionEnd={},transitionEndProperty=this.getHideRevealTransitionEndProperty("hiddenStyle");onTransitionEnd[transitionEndProperty]=this.onHideTransitionEnd,this.transition({from:options.visibleStyle,to:options.hiddenStyle,isCleaning:!0,onTransitionEnd:onTransitionEnd})},proto.onHideTransitionEnd=function(){this.isHidden&&(this.css({display:"none"}),this.emitEvent("hide"))},proto.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},Item}),function(window,factory){"function"==typeof define&&define.amd?define("outlayer/outlayer",["ev-emitter/ev-emitter","get-size/get-size","fizzy-ui-utils/utils","./item"],function(EvEmitter,getSize,utils,Item){return factory(window,EvEmitter,getSize,utils,Item)}):"object"==typeof module&&module.exports?module.exports=factory(window,require("ev-emitter"),require("get-size"),require("fizzy-ui-utils"),require("./item")):window.Outlayer=factory(window,window.EvEmitter,window.getSize,window.fizzyUIUtils,window.Outlayer.Item)}(window,function factory(window,EvEmitter,getSize,utils,Item){function Outlayer(element,options){var queryElement=utils.getQueryElement(element);if(!queryElement)return void(console&&console.error("Bad element for "+this.constructor.namespace+": "+(queryElement||element)));this.element=queryElement,jQuery&&(this.$element=jQuery(this.element)),this.options=utils.extend({},this.constructor.defaults),this.option(options);var id=++GUID;this.element.outlayerGUID=id,instances[id]=this,this._create();var isInitLayout=this._getOption("initLayout");isInitLayout&&this.layout()}function subclass(Parent){function SubClass(){Parent.apply(this,arguments)}return SubClass.prototype=Object.create(Parent.prototype),SubClass.prototype.constructor=SubClass,SubClass}function getMilliseconds(time){if("number"==typeof time)return time;var matches=time.match(/(^\d*\.?\d*)(\w*)/),num=matches&&matches[1],unit=matches&&matches[2];if(!num.length)return 0;num=parseFloat(num);var mult=msUnits[unit]||1;return num*mult}var console=window.console,jQuery=window.jQuery,noop=function(){},GUID=0,instances={};Outlayer.namespace="outlayer",Outlayer.Item=Item,Outlayer.defaults={containerStyle:{position:"relative"},initLayout:!0,originLeft:!0,originTop:!0,resize:!0,resizeContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}};var proto=Outlayer.prototype;utils.extend(proto,EvEmitter.prototype),proto.option=function(opts){utils.extend(this.options,opts)},proto._getOption=function(option){var oldOption=this.constructor.compatOptions[option];return oldOption&&void 0!==this.options[oldOption]?this.options[oldOption]:this.options[option]},Outlayer.compatOptions={initLayout:"isInitLayout",horizontal:"isHorizontal",layoutInstant:"isLayoutInstant",originLeft:"isOriginLeft",originTop:"isOriginTop",resize:"isResizeBound",resizeContainer:"isResizingContainer"},proto._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),utils.extend(this.element.style,this.options.containerStyle);var canBindResize=this._getOption("resize");canBindResize&&this.bindResize()},proto.reloadItems=function(){this.items=this._itemize(this.element.children)},proto._itemize=function(elems){for(var itemElems=this._filterFindItemElements(elems),Item=this.constructor.Item,items=[],i=0;i<itemElems.length;i++){var elem=itemElems[i],item=new Item(elem,this);items.push(item)}return items},proto._filterFindItemElements=function(elems){return utils.filterFindElements(elems,this.options.itemSelector)},proto.getItemElements=function(){return this.items.map(function(item){return item.element})},proto.layout=function(){this._resetLayout(),this._manageStamps();var layoutInstant=this._getOption("layoutInstant"),isInstant=void 0!==layoutInstant?layoutInstant:!this._isLayoutInited;this.layoutItems(this.items,isInstant),this._isLayoutInited=!0},proto._init=proto.layout,proto._resetLayout=function(){this.getSize()},proto.getSize=function(){this.size=getSize(this.element)},proto._getMeasurement=function(measurement,size){var option=this.options[measurement],elem;option?("string"==typeof option?elem=this.element.querySelector(option):option instanceof HTMLElement&&(elem=option),this[measurement]=elem?getSize(elem)[size]:option):this[measurement]=0},proto.layoutItems=function(items,isInstant){items=this._getItemsForLayout(items),this._layoutItems(items,isInstant),this._postLayout()},proto._getItemsForLayout=function(items){return items.filter(function(item){return!item.isIgnored})},proto._layoutItems=function(items,isInstant){if(this._emitCompleteOnItems("layout",items),items&&items.length){var queue=[];items.forEach(function(item){var position=this._getItemLayoutPosition(item);position.item=item,position.isInstant=isInstant||item.isLayoutInstant,queue.push(position)},this),this._processLayoutQueue(queue)}},proto._getItemLayoutPosition=function(){return{x:0,y:0}},proto._processLayoutQueue=function(queue){this.updateStagger(),queue.forEach(function(obj,i){this._positionItem(obj.item,obj.x,obj.y,obj.isInstant,i)},this)},proto.updateStagger=function(){var stagger=this.options.stagger;return null===stagger||void 0===stagger?void(this.stagger=0):(this.stagger=getMilliseconds(stagger),this.stagger)},proto._positionItem=function(item,x,y,isInstant,i){isInstant?item.goTo(x,y):(item.stagger(i*this.stagger),item.moveTo(x,y))},proto._postLayout=function(){this.resizeContainer()},proto.resizeContainer=function(){var isResizingContainer=this._getOption("resizeContainer");if(isResizingContainer){var size=this._getContainerSize();size&&(this._setContainerMeasure(size.width,!0),this._setContainerMeasure(size.height,!1))}},proto._getContainerSize=noop,proto._setContainerMeasure=function(measure,isWidth){if(void 0!==measure){var elemSize=this.size;elemSize.isBorderBox&&(measure+=isWidth?elemSize.paddingLeft+elemSize.paddingRight+elemSize.borderLeftWidth+elemSize.borderRightWidth:elemSize.paddingBottom+elemSize.paddingTop+elemSize.borderTopWidth+elemSize.borderBottomWidth),measure=Math.max(measure,0),this.element.style[isWidth?"width":"height"]=measure+"px"}},proto._emitCompleteOnItems=function(eventName,items){function onComplete(){_this.dispatchEvent(eventName+"Complete",null,[items])}function tick(){doneCount++,doneCount==count&&onComplete()}var _this=this,count=items.length;if(!items||!count)return void onComplete();var doneCount=0;items.forEach(function(item){item.once(eventName,tick)})},proto.dispatchEvent=function(type,event,args){var emitArgs=event?[event].concat(args):args;if(this.emitEvent(type,emitArgs),jQuery)if(this.$element=this.$element||jQuery(this.element),event){var $event=jQuery.Event(event);$event.type=type,this.$element.trigger($event,args)}else this.$element.trigger(type,args)},proto.ignore=function(elem){var item=this.getItem(elem);item&&(item.isIgnored=!0)},proto.unignore=function(elem){var item=this.getItem(elem);item&&delete item.isIgnored},proto.stamp=function(elems){elems=this._find(elems),elems&&(this.stamps=this.stamps.concat(elems),elems.forEach(this.ignore,this))},proto.unstamp=function(elems){elems=this._find(elems),elems&&elems.forEach(function(elem){utils.removeFrom(this.stamps,elem),this.unignore(elem)},this)},proto._find=function(elems){return elems?("string"==typeof elems&&(elems=this.element.querySelectorAll(elems)),elems=utils.makeArray(elems)):void 0},proto._manageStamps=function(){this.stamps&&this.stamps.length&&(this._getBoundingRect(),this.stamps.forEach(this._manageStamp,this))},proto._getBoundingRect=function(){var boundingRect=this.element.getBoundingClientRect(),size=this.size;this._boundingRect={left:boundingRect.left+size.paddingLeft+size.borderLeftWidth,top:boundingRect.top+size.paddingTop+size.borderTopWidth,right:boundingRect.right-(size.paddingRight+size.borderRightWidth),bottom:boundingRect.bottom-(size.paddingBottom+size.borderBottomWidth)}},proto._manageStamp=noop,proto._getElementOffset=function(elem){var boundingRect=elem.getBoundingClientRect(),thisRect=this._boundingRect,size=getSize(elem),offset={left:boundingRect.left-thisRect.left-size.marginLeft,top:boundingRect.top-thisRect.top-size.marginTop,right:thisRect.right-boundingRect.right-size.marginRight,bottom:thisRect.bottom-boundingRect.bottom-size.marginBottom};return offset},proto.handleEvent=utils.handleEvent,proto.bindResize=function(){window.addEventListener("resize",this),this.isResizeBound=!0},proto.unbindResize=function(){window.removeEventListener("resize",this),this.isResizeBound=!1},proto.onresize=function(){this.resize()},utils.debounceMethod(Outlayer,"onresize",100),proto.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},proto.needsResizeLayout=function(){var size=getSize(this.element),hasSizes=this.size&&size;return hasSizes&&size.innerWidth!==this.size.innerWidth},proto.addItems=function(elems){var items=this._itemize(elems);return items.length&&(this.items=this.items.concat(items)),items},proto.appended=function(elems){var items=this.addItems(elems);items.length&&(this.layoutItems(items,!0),this.reveal(items))},proto.prepended=function(elems){var items=this._itemize(elems);if(items.length){var previousItems=this.items.slice(0);this.items=items.concat(previousItems),this._resetLayout(),this._manageStamps(),this.layoutItems(items,!0),this.reveal(items),this.layoutItems(previousItems)}},proto.reveal=function(items){if(this._emitCompleteOnItems("reveal",items),items&&items.length){var stagger=this.updateStagger();items.forEach(function(item,i){item.stagger(i*stagger),item.reveal()})}},proto.hide=function(items){if(this._emitCompleteOnItems("hide",items),items&&items.length){var stagger=this.updateStagger();items.forEach(function(item,i){item.stagger(i*stagger),item.hide()})}},proto.revealItemElements=function(elems){var items=this.getItems(elems);this.reveal(items)},proto.hideItemElements=function(elems){var items=this.getItems(elems);this.hide(items)},proto.getItem=function(elem){for(var i=0;i<this.items.length;i++){var item=this.items[i];if(item.element==elem)return item}},proto.getItems=function(elems){elems=utils.makeArray(elems);var items=[];return elems.forEach(function(elem){var item=this.getItem(elem);item&&items.push(item)},this),items},proto.remove=function(elems){var removeItems=this.getItems(elems);this._emitCompleteOnItems("remove",removeItems),removeItems&&removeItems.length&&removeItems.forEach(function(item){item.remove(),utils.removeFrom(this.items,item)},this)},proto.destroy=function(){var style=this.element.style;style.height="",style.position="",style.width="",this.items.forEach(function(item){item.destroy()}),this.unbindResize();var id=this.element.outlayerGUID;delete instances[id],delete this.element.outlayerGUID,jQuery&&jQuery.removeData(this.element,this.constructor.namespace)},Outlayer.data=function(elem){elem=utils.getQueryElement(elem);var id=elem&&elem.outlayerGUID;return id&&instances[id]},Outlayer.create=function(namespace,options){var Layout=subclass(Outlayer);return Layout.defaults=utils.extend({},Outlayer.defaults),utils.extend(Layout.defaults,options),Layout.compatOptions=utils.extend({},Outlayer.compatOptions),Layout.namespace=namespace,Layout.data=Outlayer.data,Layout.Item=subclass(Item),utils.htmlInit(Layout,namespace),jQuery&&jQuery.bridget&&jQuery.bridget(namespace,Layout),Layout};var msUnits={ms:1,s:1e3};return Outlayer.Item=Item,Outlayer}),function(window,factory){"function"==typeof define&&define.amd?define("isotope/js/item",["outlayer/outlayer"],factory):"object"==typeof module&&module.exports?module.exports=factory(require("outlayer")):(window.Isotope=window.Isotope||{},window.Isotope.Item=factory(window.Outlayer))}(window,function factory(Outlayer){function Item(){Outlayer.Item.apply(this,arguments)}var proto=Item.prototype=Object.create(Outlayer.Item.prototype),_create=proto._create;proto._create=function(){this.id=this.layout.itemGUID++,_create.call(this),this.sortData={}},proto.updateSortData=function(){if(!this.isIgnored){this.sortData.id=this.id,this.sortData["original-order"]=this.id,this.sortData.random=Math.random();var getSortData=this.layout.options.getSortData,sorters=this.layout._sorters;for(var key in getSortData){var sorter=sorters[key];this.sortData[key]=sorter(this.element,this)}}};var _destroy=proto.destroy;return proto.destroy=function(){_destroy.apply(this,arguments),this.css({display:""})},Item}),function(window,factory){"function"==typeof define&&define.amd?define("isotope/js/layout-mode",["get-size/get-size","outlayer/outlayer"],factory):"object"==typeof module&&module.exports?module.exports=factory(require("get-size"),require("outlayer")):(window.Isotope=window.Isotope||{},window.Isotope.LayoutMode=factory(window.getSize,window.Outlayer))}(window,function factory(getSize,Outlayer){function LayoutMode(isotope){this.isotope=isotope,isotope&&(this.options=isotope.options[this.namespace],this.element=isotope.element,this.items=isotope.filteredItems,this.size=isotope.size)}var proto=LayoutMode.prototype,facadeMethods=["_resetLayout","_getItemLayoutPosition","_manageStamp","_getContainerSize","_getElementOffset","needsResizeLayout","_getOption"];return facadeMethods.forEach(function(methodName){proto[methodName]=function(){return Outlayer.prototype[methodName].apply(this.isotope,arguments)}}),proto.needsVerticalResizeLayout=function(){var size=getSize(this.isotope.element),hasSizes=this.isotope.size&&size;return hasSizes&&size.innerHeight!=this.isotope.size.innerHeight},proto._getMeasurement=function(){this.isotope._getMeasurement.apply(this,arguments)},proto.getColumnWidth=function(){this.getSegmentSize("column","Width")},proto.getRowHeight=function(){this.getSegmentSize("row","Height")},proto.getSegmentSize=function(segment,size){var segmentName=segment+size,outerSize="outer"+size;if(this._getMeasurement(segmentName,outerSize),!this[segmentName]){var firstItemSize=this.getFirstItemSize();this[segmentName]=firstItemSize&&firstItemSize[outerSize]||this.isotope.size["inner"+size]}},proto.getFirstItemSize=function(){var firstItem=this.isotope.filteredItems[0];return firstItem&&firstItem.element&&getSize(firstItem.element)},proto.layout=function(){this.isotope.layout.apply(this.isotope,arguments)},proto.getSize=function(){this.isotope.getSize(),this.size=this.isotope.size},LayoutMode.modes={},
LayoutMode.create=function(namespace,options){function Mode(){LayoutMode.apply(this,arguments)}return Mode.prototype=Object.create(proto),Mode.prototype.constructor=Mode,options&&(Mode.options=options),Mode.prototype.namespace=namespace,LayoutMode.modes[namespace]=Mode,Mode},LayoutMode}),function(window,factory){"function"==typeof define&&define.amd?define("masonry/masonry",["outlayer/outlayer","get-size/get-size"],factory):"object"==typeof module&&module.exports?module.exports=factory(require("outlayer"),require("get-size")):window.Masonry=factory(window.Outlayer,window.getSize)}(window,function factory(Outlayer,getSize){var Masonry=Outlayer.create("masonry");return Masonry.compatOptions.fitWidth="isFitWidth",Masonry.prototype._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns(),this.colYs=[];for(var i=0;i<this.cols;i++)this.colYs.push(0);this.maxY=0},Masonry.prototype.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var firstItem=this.items[0],firstItemElem=firstItem&&firstItem.element;this.columnWidth=firstItemElem&&getSize(firstItemElem).outerWidth||this.containerWidth}var columnWidth=this.columnWidth+=this.gutter,containerWidth=this.containerWidth+this.gutter,cols=containerWidth/columnWidth,excess=columnWidth-containerWidth%columnWidth,mathMethod=excess&&1>excess?"round":"floor";cols=Math[mathMethod](cols),this.cols=Math.max(cols,1)},Masonry.prototype.getContainerWidth=function(){var isFitWidth=this._getOption("fitWidth"),container=isFitWidth?this.element.parentNode:this.element,size=getSize(container);this.containerWidth=size&&size.innerWidth},Masonry.prototype._getItemLayoutPosition=function(item){item.getSize();var remainder=item.size.outerWidth%this.columnWidth,mathMethod=remainder&&1>remainder?"round":"ceil",colSpan=Math[mathMethod](item.size.outerWidth/this.columnWidth);colSpan=Math.min(colSpan,this.cols);for(var colGroup=this._getColGroup(colSpan),minimumY=Math.min.apply(Math,colGroup),shortColIndex=colGroup.indexOf(minimumY),position={x:this.columnWidth*shortColIndex,y:minimumY},setHeight=minimumY+item.size.outerHeight,setSpan=this.cols+1-colGroup.length,i=0;setSpan>i;i++)this.colYs[shortColIndex+i]=setHeight;return position},Masonry.prototype._getColGroup=function(colSpan){if(2>colSpan)return this.colYs;for(var colGroup=[],groupCount=this.cols+1-colSpan,i=0;groupCount>i;i++){var groupColYs=this.colYs.slice(i,i+colSpan);colGroup[i]=Math.max.apply(Math,groupColYs)}return colGroup},Masonry.prototype._manageStamp=function(stamp){var stampSize=getSize(stamp),offset=this._getElementOffset(stamp),isOriginLeft=this._getOption("originLeft"),firstX=isOriginLeft?offset.left:offset.right,lastX=firstX+stampSize.outerWidth,firstCol=Math.floor(firstX/this.columnWidth);firstCol=Math.max(0,firstCol);var lastCol=Math.floor(lastX/this.columnWidth);lastCol-=lastX%this.columnWidth?0:1,lastCol=Math.min(this.cols-1,lastCol);for(var isOriginTop=this._getOption("originTop"),stampMaxY=(isOriginTop?offset.top:offset.bottom)+stampSize.outerHeight,i=firstCol;lastCol>=i;i++)this.colYs[i]=Math.max(stampMaxY,this.colYs[i])},Masonry.prototype._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var size={height:this.maxY};return this._getOption("fitWidth")&&(size.width=this._getContainerFitWidth()),size},Masonry.prototype._getContainerFitWidth=function(){for(var unusedCols=0,i=this.cols;--i&&0===this.colYs[i];)unusedCols++;return(this.cols-unusedCols)*this.columnWidth-this.gutter},Masonry.prototype.needsResizeLayout=function(){var previousWidth=this.containerWidth;return this.getContainerWidth(),previousWidth!=this.containerWidth},Masonry}),function(window,factory){"function"==typeof define&&define.amd?define("isotope/js/layout-modes/masonry",["../layout-mode","masonry/masonry"],factory):"object"==typeof module&&module.exports?module.exports=factory(require("../layout-mode"),require("masonry-layout")):factory(window.Isotope.LayoutMode,window.Masonry)}(window,function factory(LayoutMode,Masonry){var MasonryMode=LayoutMode.create("masonry"),proto=MasonryMode.prototype,keepModeMethods={_getElementOffset:!0,layout:!0,_getMeasurement:!0};for(var method in Masonry.prototype)keepModeMethods[method]||(proto[method]=Masonry.prototype[method]);var measureColumns=proto.measureColumns;proto.measureColumns=function(){this.items=this.isotope.filteredItems,measureColumns.call(this)};var _getOption=proto._getOption;return proto._getOption=function(option){return"fitWidth"==option?void 0!==this.options.isFitWidth?this.options.isFitWidth:this.options.fitWidth:_getOption.apply(this.isotope,arguments)},MasonryMode}),function(window,factory){"function"==typeof define&&define.amd?define("isotope/js/layout-modes/fit-rows",["../layout-mode"],factory):"object"==typeof exports?module.exports=factory(require("../layout-mode")):factory(window.Isotope.LayoutMode)}(window,function factory(LayoutMode){var FitRows=LayoutMode.create("fitRows"),proto=FitRows.prototype;return proto._resetLayout=function(){this.x=0,this.y=0,this.maxY=0,this._getMeasurement("gutter","outerWidth")},proto._getItemLayoutPosition=function(item){item.getSize();var itemWidth=item.size.outerWidth+this.gutter,containerWidth=this.isotope.size.innerWidth+this.gutter;0!==this.x&&itemWidth+this.x>containerWidth&&(this.x=0,this.y=this.maxY);var position={x:this.x,y:this.y};return this.maxY=Math.max(this.maxY,this.y+item.size.outerHeight),this.x+=itemWidth,position},proto._getContainerSize=function(){return{height:this.maxY}},FitRows}),function(window,factory){"function"==typeof define&&define.amd?define("isotope/js/layout-modes/vertical",["../layout-mode"],factory):"object"==typeof module&&module.exports?module.exports=factory(require("../layout-mode")):factory(window.Isotope.LayoutMode)}(window,function factory(LayoutMode){var Vertical=LayoutMode.create("vertical",{horizontalAlignment:0}),proto=Vertical.prototype;return proto._resetLayout=function(){this.y=0},proto._getItemLayoutPosition=function(item){item.getSize();var x=(this.isotope.size.innerWidth-item.size.outerWidth)*this.options.horizontalAlignment,y=this.y;return this.y+=item.size.outerHeight,{x:x,y:y}},proto._getContainerSize=function(){return{height:this.y}},Vertical}),function(window,factory){"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size","desandro-matches-selector/matches-selector","fizzy-ui-utils/utils","isotope/js/item","isotope/js/layout-mode","isotope/js/layout-modes/masonry","isotope/js/layout-modes/fit-rows","isotope/js/layout-modes/vertical"],function(Outlayer,getSize,matchesSelector,utils,Item,LayoutMode){return factory(window,Outlayer,getSize,matchesSelector,utils,Item,LayoutMode)}):"object"==typeof module&&module.exports?module.exports=factory(window,require("outlayer"),require("get-size"),require("desandro-matches-selector"),require("fizzy-ui-utils"),require("isotope/js/item"),require("isotope/js/layout-mode"),require("isotope/js/layout-modes/masonry"),require("isotope/js/layout-modes/fit-rows"),require("isotope/js/layout-modes/vertical")):window.Isotope=factory(window,window.Outlayer,window.getSize,window.matchesSelector,window.fizzyUIUtils,window.Isotope.Item,window.Isotope.LayoutMode)}(window,function factory(window,Outlayer,getSize,matchesSelector,utils,Item,LayoutMode){function getItemSorter(sortBys,sortAsc){return function sorter(itemA,itemB){for(var i=0;i<sortBys.length;i++){var sortBy=sortBys[i],a=itemA.sortData[sortBy],b=itemB.sortData[sortBy];if(a>b||b>a){var isAscending=void 0!==sortAsc[sortBy]?sortAsc[sortBy]:sortAsc,direction=isAscending?1:-1;return(a>b?1:-1)*direction}}return 0}}var jQuery=window.jQuery,trim=String.prototype.trim?function(str){return str.trim()}:function(str){return str.replace(/^\s+|\s+$/g,"")},Isotope=Outlayer.create("isotope",{layoutMode:"masonry",isJQueryFiltering:!0,sortAscending:!0});Isotope.Item=Item,Isotope.LayoutMode=LayoutMode;var proto=Isotope.prototype;proto._create=function(){this.itemGUID=0,this._sorters={},this._getSorters(),Outlayer.prototype._create.call(this),this.modes={},this.filteredItems=this.items,this.sortHistory=["original-order"];for(var name in LayoutMode.modes)this._initLayoutMode(name)},proto.reloadItems=function(){this.itemGUID=0,Outlayer.prototype.reloadItems.call(this)},proto._itemize=function(){for(var items=Outlayer.prototype._itemize.apply(this,arguments),i=0;i<items.length;i++){var item=items[i];item.id=this.itemGUID++}return this._updateItemsSortData(items),items},proto._initLayoutMode=function(name){var Mode=LayoutMode.modes[name],initialOpts=this.options[name]||{};this.options[name]=Mode.options?utils.extend(Mode.options,initialOpts):initialOpts,this.modes[name]=new Mode(this)},proto.layout=function(){return!this._isLayoutInited&&this._getOption("initLayout")?void this.arrange():void this._layout()},proto._layout=function(){var isInstant=this._getIsInstant();this._resetLayout(),this._manageStamps(),this.layoutItems(this.filteredItems,isInstant),this._isLayoutInited=!0},proto.arrange=function(opts){this.option(opts),this._getIsInstant();var filtered=this._filter(this.items);this.filteredItems=filtered.matches,this._bindArrangeComplete(),this._isInstant?this._noTransition(this._hideReveal,[filtered]):this._hideReveal(filtered),this._sort(),this._layout()},proto._init=proto.arrange,proto._hideReveal=function(filtered){this.reveal(filtered.needReveal),this.hide(filtered.needHide)},proto._getIsInstant=function(){var isLayoutInstant=this._getOption("layoutInstant"),isInstant=void 0!==isLayoutInstant?isLayoutInstant:!this._isLayoutInited;return this._isInstant=isInstant,isInstant},proto._bindArrangeComplete=function(){function arrangeParallelCallback(){isLayoutComplete&&isHideComplete&&isRevealComplete&&_this.dispatchEvent("arrangeComplete",null,[_this.filteredItems])}var isLayoutComplete,isHideComplete,isRevealComplete,_this=this;this.once("layoutComplete",function(){isLayoutComplete=!0,arrangeParallelCallback()}),this.once("hideComplete",function(){isHideComplete=!0,arrangeParallelCallback()}),this.once("revealComplete",function(){isRevealComplete=!0,arrangeParallelCallback()})},proto._filter=function(items){var filter=this.options.filter;filter=filter||"*";for(var matches=[],hiddenMatched=[],visibleUnmatched=[],test=this._getFilterTest(filter),i=0;i<items.length;i++){var item=items[i];if(!item.isIgnored){var isMatched=test(item);isMatched&&matches.push(item),isMatched&&item.isHidden?hiddenMatched.push(item):isMatched||item.isHidden||visibleUnmatched.push(item)}}return{matches:matches,needReveal:hiddenMatched,needHide:visibleUnmatched}},proto._getFilterTest=function(filter){return jQuery&&this.options.isJQueryFiltering?function(item){return jQuery(item.element).is(filter)}:"function"==typeof filter?function(item){return filter(item.element)}:function(item){return matchesSelector(item.element,filter)}},proto.updateSortData=function(elems){var items;elems?(elems=utils.makeArray(elems),items=this.getItems(elems)):items=this.items,this._getSorters(),this._updateItemsSortData(items)},proto._getSorters=function(){var getSortData=this.options.getSortData;for(var key in getSortData){var sorter=getSortData[key];this._sorters[key]=mungeSorter(sorter)}},proto._updateItemsSortData=function(items){for(var len=items&&items.length,i=0;len&&len>i;i++){var item=items[i];item.updateSortData()}};var mungeSorter=function(){function mungeSorter(sorter){if("string"!=typeof sorter)return sorter;var args=trim(sorter).split(" "),query=args[0],attrMatch=query.match(/^\[(.+)\]$/),attr=attrMatch&&attrMatch[1],getValue=getValueGetter(attr,query),parser=Isotope.sortDataParsers[args[1]];return sorter=parser?function(elem){return elem&&parser(getValue(elem))}:function(elem){return elem&&getValue(elem)}}function getValueGetter(attr,query){return attr?function getAttribute(elem){return elem.getAttribute(attr)}:function getChildText(elem){var child=elem.querySelector(query);return child&&child.textContent}}return mungeSorter}();Isotope.sortDataParsers={parseInt:function(val){return parseInt(val,10)},parseFloat:function(val){return parseFloat(val)}},proto._sort=function(){var sortByOpt=this.options.sortBy;if(sortByOpt){var sortBys=[].concat.apply(sortByOpt,this.sortHistory),itemSorter=getItemSorter(sortBys,this.options.sortAscending);this.filteredItems.sort(itemSorter),sortByOpt!=this.sortHistory[0]&&this.sortHistory.unshift(sortByOpt)}},proto._mode=function(){var layoutMode=this.options.layoutMode,mode=this.modes[layoutMode];if(!mode)throw new Error("No layout mode: "+layoutMode);return mode.options=this.options[layoutMode],mode},proto._resetLayout=function(){Outlayer.prototype._resetLayout.call(this),this._mode()._resetLayout()},proto._getItemLayoutPosition=function(item){return this._mode()._getItemLayoutPosition(item)},proto._manageStamp=function(stamp){this._mode()._manageStamp(stamp)},proto._getContainerSize=function(){return this._mode()._getContainerSize()},proto.needsResizeLayout=function(){return this._mode().needsResizeLayout()},proto.appended=function(elems){var items=this.addItems(elems);if(items.length){var filteredItems=this._filterRevealAdded(items);this.filteredItems=this.filteredItems.concat(filteredItems)}},proto.prepended=function(elems){var items=this._itemize(elems);if(items.length){this._resetLayout(),this._manageStamps();var filteredItems=this._filterRevealAdded(items);this.layoutItems(this.filteredItems),this.filteredItems=filteredItems.concat(this.filteredItems),this.items=items.concat(this.items)}},proto._filterRevealAdded=function(items){var filtered=this._filter(items);return this.hide(filtered.needHide),this.reveal(filtered.matches),this.layoutItems(filtered.matches,!0),filtered.matches},proto.insert=function(elems){var items=this.addItems(elems);if(items.length){var i,item,len=items.length;for(i=0;len>i;i++)item=items[i],this.element.appendChild(item.element);var filteredInsertItems=this._filter(items).matches;for(i=0;len>i;i++)items[i].isLayoutInstant=!0;for(this.arrange(),i=0;len>i;i++)delete items[i].isLayoutInstant;this.reveal(filteredInsertItems)}};var _remove=proto.remove;return proto.remove=function(elems){elems=utils.makeArray(elems);var removeItems=this.getItems(elems);_remove.call(this,elems);for(var len=removeItems&&removeItems.length,i=0;len&&len>i;i++){var item=removeItems[i];utils.removeFrom(this.filteredItems,item)}},proto.shuffle=function(){for(var i=0;i<this.items.length;i++){var item=this.items[i];item.sortData.random=Math.random()}this.options.sortBy="random",this._sort(),this._layout()},proto._noTransition=function(fn,args){var transitionDuration=this.options.transitionDuration;this.options.transitionDuration=0;var returnValue=fn.apply(this,args);return this.options.transitionDuration=transitionDuration,returnValue},proto.getFilteredItemElements=function(){return this.filteredItems.map(function(item){return item.element})},Isotope}),function(root,factory){"object"==typeof exports?module.exports=factory():"function"==typeof define&&define.amd?define(["jquery","googlemaps!"],factory):root.GMaps=factory()}(this,function(){var extend_object=function(obj,new_obj){var name;if(obj===new_obj)return obj;for(name in new_obj)void 0!==new_obj[name]&&(obj[name]=new_obj[name]);return obj},replace_object=function(obj,replace){var name;if(obj===replace)return obj;for(name in replace)void 0!=obj[name]&&(obj[name]=replace[name]);return obj},array_map=function(array,callback){var original_callback_params=Array.prototype.slice.call(arguments,2),array_return=[],array_length=array.length,i;if(Array.prototype.map&&array.map===Array.prototype.map)array_return=Array.prototype.map.call(array,function(item){var callback_params=original_callback_params.slice(0);return callback_params.splice(0,0,item),callback.apply(this,callback_params)});else for(i=0;array_length>i;i++)callback_params=original_callback_params,callback_params.splice(0,0,array[i]),array_return.push(callback.apply(this,callback_params));return array_return},array_flat=function(array){var new_array=[],i;for(i=0;i<array.length;i++)new_array=new_array.concat(array[i]);return new_array},coordsToLatLngs=function(coords,useGeoJSON){var first_coord=coords[0],second_coord=coords[1];return useGeoJSON&&(first_coord=coords[1],second_coord=coords[0]),new google.maps.LatLng(first_coord,second_coord)},arrayToLatLng=function(coords,useGeoJSON){var i;for(i=0;i<coords.length;i++)coords[i]instanceof google.maps.LatLng||(coords[i].length>0&&"object"==typeof coords[i][0]?coords[i]=arrayToLatLng(coords[i],useGeoJSON):coords[i]=coordsToLatLngs(coords[i],useGeoJSON));return coords},getElementsByClassName=function(class_name,context){var element,_class=class_name.replace(".","");return element="jQuery"in this&&context?$("."+_class,context)[0]:document.getElementsByClassName(_class)[0]},getElementById=function(id,context){var element,id=id.replace("#","");return element="jQuery"in window&&context?$("#"+id,context)[0]:document.getElementById(id)},findAbsolutePosition=function(obj){var curleft=0,curtop=0;if(obj.offsetParent)do curleft+=obj.offsetLeft,curtop+=obj.offsetTop;while(obj=obj.offsetParent);return[curleft,curtop]},GMaps=function(global){var doc=document,GMaps=function(options){if("object"!=typeof window.google||!window.google.maps)return"object"==typeof window.console&&window.console.error&&console.error("Google Maps API is required. Please register the following JavaScript library https://maps.googleapis.com/maps/api/js."),function(){};if(!this)return new GMaps(options);options.zoom=options.zoom||15,options.mapType=options.mapType||"roadmap";var valueOrDefault=function(value,defaultValue){return void 0===value?defaultValue:value},self=this,i,events_that_hide_context_menu=["bounds_changed","center_changed","click","dblclick","drag","dragend","dragstart","idle","maptypeid_changed","projection_changed","resize","tilesloaded","zoom_changed"],events_that_doesnt_hide_context_menu=["mousemove","mouseout","mouseover"],options_to_be_deleted=["el","lat","lng","mapType","width","height","markerClusterer","enableNewStyle"],identifier=options.el||options.div,markerClustererFunction=options.markerClusterer,mapType=google.maps.MapTypeId[options.mapType.toUpperCase()],map_center=new google.maps.LatLng(options.lat,options.lng),zoomControl=valueOrDefault(options.zoomControl,!0),zoomControlOpt=options.zoomControlOpt||{style:"DEFAULT",position:"TOP_LEFT"},zoomControlStyle=zoomControlOpt.style||"DEFAULT",zoomControlPosition=zoomControlOpt.position||"TOP_LEFT",panControl=valueOrDefault(options.panControl,!0),mapTypeControl=valueOrDefault(options.mapTypeControl,!0),scaleControl=valueOrDefault(options.scaleControl,!0),streetViewControl=valueOrDefault(options.streetViewControl,!0),overviewMapControl=valueOrDefault(overviewMapControl,!0),map_options={},map_base_options={zoom:this.zoom,center:map_center,mapTypeId:mapType},map_controls_options={panControl:panControl,zoomControl:zoomControl,zoomControlOptions:{style:google.maps.ZoomControlStyle[zoomControlStyle],position:google.maps.ControlPosition[zoomControlPosition]},mapTypeControl:mapTypeControl,scaleControl:scaleControl,streetViewControl:streetViewControl,overviewMapControl:overviewMapControl};if("string"==typeof options.el||"string"==typeof options.div?identifier.indexOf("#")>-1?this.el=getElementById(identifier,options.context):this.el=getElementsByClassName.apply(this,[identifier,options.context]):this.el=identifier,"undefined"==typeof this.el||null===this.el)throw"No element defined.";for(window.context_menu=window.context_menu||{},window.context_menu[self.el.id]={},this.controls=[],this.overlays=[],this.layers=[],this.singleLayers={},this.markers=[],this.polylines=[],this.routes=[],this.polygons=[],this.infoWindow=null,this.overlay_el=null,this.zoom=options.zoom,this.registered_events={},this.el.style.width=options.width||this.el.scrollWidth||this.el.offsetWidth,this.el.style.height=options.height||this.el.scrollHeight||this.el.offsetHeight,google.maps.visualRefresh=options.enableNewStyle,i=0;i<options_to_be_deleted.length;i++)delete options[options_to_be_deleted[i]];for(1!=options.disableDefaultUI&&(map_base_options=extend_object(map_base_options,map_controls_options)),map_options=extend_object(map_base_options,options),i=0;i<events_that_hide_context_menu.length;i++)delete map_options[events_that_hide_context_menu[i]];for(i=0;i<events_that_doesnt_hide_context_menu.length;i++)delete map_options[events_that_doesnt_hide_context_menu[i]];this.map=new google.maps.Map(this.el,map_options),markerClustererFunction&&(this.markerClusterer=markerClustererFunction.apply(this,[this.map]));var buildContextMenuHTML=function(control,e){var html="",options=window.context_menu[self.el.id][control];for(var i in options)if(options.hasOwnProperty(i)){var option=options[i];html+='<li><a id="'+control+"_"+i+'" href="#">'+option.title+"</a></li>"}if(getElementById("gmaps_context_menu")){var context_menu_element=getElementById("gmaps_context_menu");context_menu_element.innerHTML=html;var context_menu_items=context_menu_element.getElementsByTagName("a"),context_menu_items_count=context_menu_items.length,i;for(i=0;context_menu_items_count>i;i++){var context_menu_item=context_menu_items[i],assign_menu_item_action=function(ev){ev.preventDefault(),options[this.id.replace(control+"_","")].action.apply(self,[e]),self.hideContextMenu()};google.maps.event.clearListeners(context_menu_item,"click"),google.maps.event.addDomListenerOnce(context_menu_item,"click",assign_menu_item_action,!1)}var position=findAbsolutePosition.apply(this,[self.el]),left=position[0]+e.pixel.x-15,top=position[1]+e.pixel.y-15;context_menu_element.style.left=left+"px",context_menu_element.style.top=top+"px"}};this.buildContextMenu=function(control,e){if("marker"===control){e.pixel={};var overlay=new google.maps.OverlayView;overlay.setMap(self.map),overlay.draw=function(){var projection=overlay.getProjection(),position=e.marker.getPosition();e.pixel=projection.fromLatLngToContainerPixel(position),buildContextMenuHTML(control,e)}}else buildContextMenuHTML(control,e);var context_menu_element=getElementById("gmaps_context_menu");setTimeout(function(){context_menu_element.style.display="block"},0)},this.setContextMenu=function(options){window.context_menu[self.el.id][options.control]={};var i,ul=doc.createElement("ul");for(i in options.options)if(options.options.hasOwnProperty(i)){var option=options.options[i];window.context_menu[self.el.id][options.control][option.name]={title:option.title,action:option.action}}ul.id="gmaps_context_menu",ul.style.display="none",ul.style.position="absolute",ul.style.minWidth="100px",ul.style.background="white",ul.style.listStyle="none",ul.style.padding="8px",ul.style.boxShadow="2px 2px 6px #ccc",getElementById("gmaps_context_menu")||doc.body.appendChild(ul);var context_menu_element=getElementById("gmaps_context_menu");google.maps.event.addDomListener(context_menu_element,"mouseout",function(ev){ev.relatedTarget&&this.contains(ev.relatedTarget)||window.setTimeout(function(){context_menu_element.style.display="none"},400)},!1)},this.hideContextMenu=function(){var context_menu_element=getElementById("gmaps_context_menu");context_menu_element&&(context_menu_element.style.display="none")};var setupListener=function(object,name){google.maps.event.addListener(object,name,function(e){void 0==e&&(e=this),options[name].apply(this,[e]),self.hideContextMenu()})};google.maps.event.addListener(this.map,"zoom_changed",this.hideContextMenu);for(var ev=0;ev<events_that_hide_context_menu.length;ev++){var name=events_that_hide_context_menu[ev];name in options&&setupListener(this.map,name)}for(var ev=0;ev<events_that_doesnt_hide_context_menu.length;ev++){var name=events_that_doesnt_hide_context_menu[ev];name in options&&setupListener(this.map,name)}google.maps.event.addListener(this.map,"rightclick",function(e){options.rightclick&&options.rightclick.apply(this,[e]),void 0!=window.context_menu[self.el.id].map&&self.buildContextMenu("map",e)}),this.refresh=function(){google.maps.event.trigger(this.map,"resize")},this.fitZoom=function(){var latLngs=[],markers_length=this.markers.length,i;for(i=0;markers_length>i;i++)"boolean"==typeof this.markers[i].visible&&this.markers[i].visible&&latLngs.push(this.markers[i].getPosition());this.fitLatLngBounds(latLngs)},this.fitLatLngBounds=function(latLngs){var total=latLngs.length,bounds=new google.maps.LatLngBounds,i;for(i=0;total>i;i++)bounds.extend(latLngs[i]);this.map.fitBounds(bounds)},this.setCenter=function(lat,lng,callback){this.map.panTo(new google.maps.LatLng(lat,lng)),callback&&callback()},this.getElement=function(){return this.el},this.zoomIn=function(value){value=value||1,this.zoom=this.map.getZoom()+value,this.map.setZoom(this.zoom)},this.zoomOut=function(value){value=value||1,this.zoom=this.map.getZoom()-value,this.map.setZoom(this.zoom)};var native_methods=[],method;for(method in this.map)"function"!=typeof this.map[method]||this[method]||native_methods.push(method);for(i=0;i<native_methods.length;i++)!function(gmaps,scope,method_name){gmaps[method_name]=function(){return scope[method_name].apply(scope,arguments)}}(this,this.map,native_methods[i])};return GMaps}(this);GMaps.prototype.createControl=function(options){var control=document.createElement("div");control.style.cursor="pointer",options.disableDefaultStyles!==!0&&(control.style.fontFamily="Roboto, Arial, sans-serif",control.style.fontSize="11px",control.style.boxShadow="rgba(0, 0, 0, 0.298039) 0px 1px 4px -1px");for(var option in options.style)control.style[option]=options.style[option];options.id&&(control.id=options.id),options.title&&(control.title=options.title),options.classes&&(control.className=options.classes),options.content&&("string"==typeof options.content?control.innerHTML=options.content:options.content instanceof HTMLElement&&control.appendChild(options.content)),options.position&&(control.position=google.maps.ControlPosition[options.position.toUpperCase()]);for(var ev in options.events)!function(object,name){google.maps.event.addDomListener(object,name,function(){options.events[name].apply(this,[this])})}(control,ev);return control.index=1,control},GMaps.prototype.addControl=function(options){var control=this.createControl(options);return this.controls.push(control),this.map.controls[control.position].push(control),control},GMaps.prototype.removeControl=function(control){var position=null,i;for(i=0;i<this.controls.length;i++)this.controls[i]==control&&(position=this.controls[i].position,this.controls.splice(i,1));if(position)for(i=0;i<this.map.controls.length;i++){var controlsForPosition=this.map.controls[control.position];if(controlsForPosition.getAt(i)==control){controlsForPosition.removeAt(i);break}}return control},GMaps.prototype.createMarker=function(options){if(void 0==options.lat&&void 0==options.lng&&void 0==options.position)throw"No latitude or longitude defined.";var self=this,details=options.details,fences=options.fences,outside=options.outside,base_options={position:new google.maps.LatLng(options.lat,options.lng),map:null},marker_options=extend_object(base_options,options);delete marker_options.lat,delete marker_options.lng,delete marker_options.fences,delete marker_options.outside;var marker=new google.maps.Marker(marker_options);if(marker.fences=fences,options.infoWindow){marker.infoWindow=new google.maps.InfoWindow(options.infoWindow);for(var info_window_events=["closeclick","content_changed","domready","position_changed","zindex_changed"],ev=0;ev<info_window_events.length;ev++)!function(object,name){options.infoWindow[name]&&google.maps.event.addListener(object,name,function(e){options.infoWindow[name].apply(this,[e])})}(marker.infoWindow,info_window_events[ev])}for(var marker_events=["animation_changed","clickable_changed","cursor_changed","draggable_changed","flat_changed","icon_changed","position_changed","shadow_changed","shape_changed","title_changed","visible_changed","zindex_changed"],marker_events_with_mouse=["dblclick","drag","dragend","dragstart","mousedown","mouseout","mouseover","mouseup"],ev=0;ev<marker_events.length;ev++)!function(object,name){options[name]&&google.maps.event.addListener(object,name,function(){options[name].apply(this,[this])})}(marker,marker_events[ev]);for(var ev=0;ev<marker_events_with_mouse.length;ev++)!function(map,object,name){options[name]&&google.maps.event.addListener(object,name,function(me){me.pixel||(me.pixel=map.getProjection().fromLatLngToPoint(me.latLng)),options[name].apply(this,[me])})}(this.map,marker,marker_events_with_mouse[ev]);return google.maps.event.addListener(marker,"click",function(){this.details=details,options.click&&options.click.apply(this,[this]),marker.infoWindow&&(self.hideInfoWindows(),marker.infoWindow.open(self.map,marker))}),google.maps.event.addListener(marker,"rightclick",function(e){e.marker=this,options.rightclick&&options.rightclick.apply(this,[e]),void 0!=window.context_menu[self.el.id].marker&&self.buildContextMenu("marker",e)}),marker.fences&&google.maps.event.addListener(marker,"dragend",function(){self.checkMarkerGeofence(marker,function(m,f){outside(m,f)})}),marker},GMaps.prototype.addMarker=function(options){var marker;if(options.hasOwnProperty("gm_accessors_"))marker=options;else{if(!(options.hasOwnProperty("lat")&&options.hasOwnProperty("lng")||options.position))throw"No latitude or longitude defined.";marker=this.createMarker(options)}return marker.setMap(this.map),this.markerClusterer&&this.markerClusterer.addMarker(marker),this.markers.push(marker),GMaps.fire("marker_added",marker,this),marker},GMaps.prototype.addMarkers=function(array){for(var i=0,marker;marker=array[i];i++)this.addMarker(marker);return this.markers},GMaps.prototype.hideInfoWindows=function(){for(var i=0,marker;marker=this.markers[i];i++)marker.infoWindow&&marker.infoWindow.close()},GMaps.prototype.removeMarker=function(marker){for(var i=0;i<this.markers.length;i++)if(this.markers[i]===marker){this.markers[i].setMap(null),this.markers.splice(i,1),this.markerClusterer&&this.markerClusterer.removeMarker(marker),GMaps.fire("marker_removed",marker,this);break}return marker},GMaps.prototype.removeMarkers=function(collection){var new_markers=[];if("undefined"==typeof collection){for(var i=0;i<this.markers.length;i++){var marker=this.markers[i];marker.setMap(null),GMaps.fire("marker_removed",marker,this)}this.markerClusterer&&this.markerClusterer.clearMarkers&&this.markerClusterer.clearMarkers(),this.markers=new_markers}else{for(var i=0;i<collection.length;i++){var index=this.markers.indexOf(collection[i]);if(index>-1){var marker=this.markers[index];marker.setMap(null),this.markerClusterer&&this.markerClusterer.removeMarker(marker),GMaps.fire("marker_removed",marker,this)}}for(var i=0;i<this.markers.length;i++){var marker=this.markers[i];null!=marker.getMap()&&new_markers.push(marker)}this.markers=new_markers}},GMaps.prototype.drawOverlay=function(options){var overlay=new google.maps.OverlayView,auto_show=!0;return overlay.setMap(this.map),null!=options.auto_show&&(auto_show=options.auto_show),overlay.onAdd=function(){var el=document.createElement("div");el.style.borderStyle="none",el.style.borderWidth="0px",el.style.position="absolute",el.style.zIndex=100,el.innerHTML=options.content,overlay.el=el,options.layer||(options.layer="overlayLayer");var panes=this.getPanes(),overlayLayer=panes[options.layer],stop_overlay_events=["contextmenu","DOMMouseScroll","dblclick","mousedown"];overlayLayer.appendChild(el);for(var ev=0;ev<stop_overlay_events.length;ev++)!function(object,name){google.maps.event.addDomListener(object,name,function(e){-1!=navigator.userAgent.toLowerCase().indexOf("msie")&&document.all?(e.cancelBubble=!0,e.returnValue=!1):e.stopPropagation()})}(el,stop_overlay_events[ev]);options.click&&(panes.overlayMouseTarget.appendChild(overlay.el),google.maps.event.addDomListener(overlay.el,"click",function(){options.click.apply(overlay,[overlay]);
})),google.maps.event.trigger(this,"ready")},overlay.draw=function(){var projection=this.getProjection(),pixel=projection.fromLatLngToDivPixel(new google.maps.LatLng(options.lat,options.lng));options.horizontalOffset=options.horizontalOffset||0,options.verticalOffset=options.verticalOffset||0;var el=overlay.el,content=el.children[0],content_height=content.clientHeight,content_width=content.clientWidth;switch(options.verticalAlign){case"top":el.style.top=pixel.y-content_height+options.verticalOffset+"px";break;default:case"middle":el.style.top=pixel.y-content_height/2+options.verticalOffset+"px";break;case"bottom":el.style.top=pixel.y+options.verticalOffset+"px"}switch(options.horizontalAlign){case"left":el.style.left=pixel.x-content_width+options.horizontalOffset+"px";break;default:case"center":el.style.left=pixel.x-content_width/2+options.horizontalOffset+"px";break;case"right":el.style.left=pixel.x+options.horizontalOffset+"px"}el.style.display=auto_show?"block":"none",auto_show||options.show.apply(this,[el])},overlay.onRemove=function(){var el=overlay.el;options.remove?options.remove.apply(this,[el]):(overlay.el.parentNode.removeChild(overlay.el),overlay.el=null)},this.overlays.push(overlay),overlay},GMaps.prototype.removeOverlay=function(overlay){for(var i=0;i<this.overlays.length;i++)if(this.overlays[i]===overlay){this.overlays[i].setMap(null),this.overlays.splice(i,1);break}},GMaps.prototype.removeOverlays=function(){for(var i=0,item;item=this.overlays[i];i++)item.setMap(null);this.overlays=[]},GMaps.prototype.drawPolyline=function(options){var path=[],points=options.path;if(points.length)if(void 0===points[0][0])path=points;else for(var i=0,latlng;latlng=points[i];i++)path.push(new google.maps.LatLng(latlng[0],latlng[1]));var polyline_options={map:this.map,path:path,strokeColor:options.strokeColor,strokeOpacity:options.strokeOpacity,strokeWeight:options.strokeWeight,geodesic:options.geodesic,clickable:!0,editable:!1,visible:!0};options.hasOwnProperty("clickable")&&(polyline_options.clickable=options.clickable),options.hasOwnProperty("editable")&&(polyline_options.editable=options.editable),options.hasOwnProperty("icons")&&(polyline_options.icons=options.icons),options.hasOwnProperty("zIndex")&&(polyline_options.zIndex=options.zIndex);for(var polyline=new google.maps.Polyline(polyline_options),polyline_events=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"],ev=0;ev<polyline_events.length;ev++)!function(object,name){options[name]&&google.maps.event.addListener(object,name,function(e){options[name].apply(this,[e])})}(polyline,polyline_events[ev]);return this.polylines.push(polyline),GMaps.fire("polyline_added",polyline,this),polyline},GMaps.prototype.removePolyline=function(polyline){for(var i=0;i<this.polylines.length;i++)if(this.polylines[i]===polyline){this.polylines[i].setMap(null),this.polylines.splice(i,1),GMaps.fire("polyline_removed",polyline,this);break}},GMaps.prototype.removePolylines=function(){for(var i=0,item;item=this.polylines[i];i++)item.setMap(null);this.polylines=[]},GMaps.prototype.drawCircle=function(options){options=extend_object({map:this.map,center:new google.maps.LatLng(options.lat,options.lng)},options),delete options.lat,delete options.lng;for(var polygon=new google.maps.Circle(options),polygon_events=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"],ev=0;ev<polygon_events.length;ev++)!function(object,name){options[name]&&google.maps.event.addListener(object,name,function(e){options[name].apply(this,[e])})}(polygon,polygon_events[ev]);return this.polygons.push(polygon),polygon},GMaps.prototype.drawRectangle=function(options){options=extend_object({map:this.map},options);var latLngBounds=new google.maps.LatLngBounds(new google.maps.LatLng(options.bounds[0][0],options.bounds[0][1]),new google.maps.LatLng(options.bounds[1][0],options.bounds[1][1]));options.bounds=latLngBounds;for(var polygon=new google.maps.Rectangle(options),polygon_events=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"],ev=0;ev<polygon_events.length;ev++)!function(object,name){options[name]&&google.maps.event.addListener(object,name,function(e){options[name].apply(this,[e])})}(polygon,polygon_events[ev]);return this.polygons.push(polygon),polygon},GMaps.prototype.drawPolygon=function(options){var useGeoJSON=!1;options.hasOwnProperty("useGeoJSON")&&(useGeoJSON=options.useGeoJSON),delete options.useGeoJSON,options=extend_object({map:this.map},options),0==useGeoJSON&&(options.paths=[options.paths.slice(0)]),options.paths.length>0&&options.paths[0].length>0&&(options.paths=array_flat(array_map(options.paths,arrayToLatLng,useGeoJSON)));for(var polygon=new google.maps.Polygon(options),polygon_events=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"],ev=0;ev<polygon_events.length;ev++)!function(object,name){options[name]&&google.maps.event.addListener(object,name,function(e){options[name].apply(this,[e])})}(polygon,polygon_events[ev]);return this.polygons.push(polygon),GMaps.fire("polygon_added",polygon,this),polygon},GMaps.prototype.removePolygon=function(polygon){for(var i=0;i<this.polygons.length;i++)if(this.polygons[i]===polygon){this.polygons[i].setMap(null),this.polygons.splice(i,1),GMaps.fire("polygon_removed",polygon,this);break}},GMaps.prototype.removePolygons=function(){for(var i=0,item;item=this.polygons[i];i++)item.setMap(null);this.polygons=[]},GMaps.prototype.getFromFusionTables=function(options){var events=options.events;delete options.events;var fusion_tables_options=options,layer=new google.maps.FusionTablesLayer(fusion_tables_options);for(var ev in events)!function(object,name){google.maps.event.addListener(object,name,function(e){events[name].apply(this,[e])})}(layer,ev);return this.layers.push(layer),layer},GMaps.prototype.loadFromFusionTables=function(options){var layer=this.getFromFusionTables(options);return layer.setMap(this.map),layer},GMaps.prototype.getFromKML=function(options){var url=options.url,events=options.events;delete options.url,delete options.events;var kml_options=options,layer=new google.maps.KmlLayer(url,kml_options);for(var ev in events)!function(object,name){google.maps.event.addListener(object,name,function(e){events[name].apply(this,[e])})}(layer,ev);return this.layers.push(layer),layer},GMaps.prototype.loadFromKML=function(options){var layer=this.getFromKML(options);return layer.setMap(this.map),layer},GMaps.prototype.addLayer=function(layerName,options){options=options||{};var layer;switch(layerName){case"weather":this.singleLayers.weather=layer=new google.maps.weather.WeatherLayer;break;case"clouds":this.singleLayers.clouds=layer=new google.maps.weather.CloudLayer;break;case"traffic":this.singleLayers.traffic=layer=new google.maps.TrafficLayer;break;case"transit":this.singleLayers.transit=layer=new google.maps.TransitLayer;break;case"bicycling":this.singleLayers.bicycling=layer=new google.maps.BicyclingLayer;break;case"panoramio":this.singleLayers.panoramio=layer=new google.maps.panoramio.PanoramioLayer,layer.setTag(options.filter),delete options.filter,options.click&&google.maps.event.addListener(layer,"click",function(event){options.click(event),delete options.click});break;case"places":if(this.singleLayers.places=layer=new google.maps.places.PlacesService(this.map),options.search||options.nearbySearch||options.radarSearch){var placeSearchRequest={bounds:options.bounds||null,keyword:options.keyword||null,location:options.location||null,name:options.name||null,radius:options.radius||null,rankBy:options.rankBy||null,types:options.types||null};options.radarSearch&&layer.radarSearch(placeSearchRequest,options.radarSearch),options.search&&layer.search(placeSearchRequest,options.search),options.nearbySearch&&layer.nearbySearch(placeSearchRequest,options.nearbySearch)}if(options.textSearch){var textSearchRequest={bounds:options.bounds||null,location:options.location||null,query:options.query||null,radius:options.radius||null};layer.textSearch(textSearchRequest,options.textSearch)}}return void 0!==layer?("function"==typeof layer.setOptions&&layer.setOptions(options),"function"==typeof layer.setMap&&layer.setMap(this.map),layer):void 0},GMaps.prototype.removeLayer=function(layer){if("string"==typeof layer&&void 0!==this.singleLayers[layer])this.singleLayers[layer].setMap(null),delete this.singleLayers[layer];else for(var i=0;i<this.layers.length;i++)if(this.layers[i]===layer){this.layers[i].setMap(null),this.layers.splice(i,1);break}};var travelMode,unitSystem;return GMaps.prototype.getRoutes=function(options){switch(options.travelMode){case"bicycling":travelMode=google.maps.TravelMode.BICYCLING;break;case"transit":travelMode=google.maps.TravelMode.TRANSIT;break;case"driving":travelMode=google.maps.TravelMode.DRIVING;break;default:travelMode=google.maps.TravelMode.WALKING}unitSystem="imperial"===options.unitSystem?google.maps.UnitSystem.IMPERIAL:google.maps.UnitSystem.METRIC;var base_options={avoidHighways:!1,avoidTolls:!1,optimizeWaypoints:!1,waypoints:[]},request_options=extend_object(base_options,options);request_options.origin=/string/.test(typeof options.origin)?options.origin:new google.maps.LatLng(options.origin[0],options.origin[1]),request_options.destination=/string/.test(typeof options.destination)?options.destination:new google.maps.LatLng(options.destination[0],options.destination[1]),request_options.travelMode=travelMode,request_options.unitSystem=unitSystem,delete request_options.callback,delete request_options.error;var self=this,routes=[],service=new google.maps.DirectionsService;service.route(request_options,function(result,status){if(status===google.maps.DirectionsStatus.OK){for(var r in result.routes)result.routes.hasOwnProperty(r)&&routes.push(result.routes[r]);options.callback&&options.callback(routes,result,status)}else options.error&&options.error(result,status)})},GMaps.prototype.removeRoutes=function(){this.routes.length=0},GMaps.prototype.getElevations=function(options){options=extend_object({locations:[],path:!1,samples:256},options),options.locations.length>0&&options.locations[0].length>0&&(options.locations=array_flat(array_map([options.locations],arrayToLatLng,!1)));var callback=options.callback;delete options.callback;var service=new google.maps.ElevationService;if(options.path){var pathRequest={path:options.locations,samples:options.samples};service.getElevationAlongPath(pathRequest,function(result,status){callback&&"function"==typeof callback&&callback(result,status)})}else delete options.path,delete options.samples,service.getElevationForLocations(options,function(result,status){callback&&"function"==typeof callback&&callback(result,status)})},GMaps.prototype.cleanRoute=GMaps.prototype.removePolylines,GMaps.prototype.renderRoute=function(options,renderOptions){var self=this,panel="string"==typeof renderOptions.panel?document.getElementById(renderOptions.panel.replace("#","")):renderOptions.panel,display;renderOptions.panel=panel,renderOptions=extend_object({map:this.map},renderOptions),display=new google.maps.DirectionsRenderer(renderOptions),this.getRoutes({origin:options.origin,destination:options.destination,travelMode:options.travelMode,waypoints:options.waypoints,unitSystem:options.unitSystem,error:options.error,avoidHighways:options.avoidHighways,avoidTolls:options.avoidTolls,optimizeWaypoints:options.optimizeWaypoints,callback:function(routes,response,status){status===google.maps.DirectionsStatus.OK&&display.setDirections(response)}})},GMaps.prototype.drawRoute=function(options){var self=this;this.getRoutes({origin:options.origin,destination:options.destination,travelMode:options.travelMode,waypoints:options.waypoints,unitSystem:options.unitSystem,error:options.error,avoidHighways:options.avoidHighways,avoidTolls:options.avoidTolls,optimizeWaypoints:options.optimizeWaypoints,callback:function(routes){if(routes.length>0){var polyline_options={path:routes[routes.length-1].overview_path,strokeColor:options.strokeColor,strokeOpacity:options.strokeOpacity,strokeWeight:options.strokeWeight};options.hasOwnProperty("icons")&&(polyline_options.icons=options.icons),self.drawPolyline(polyline_options),options.callback&&options.callback(routes[routes.length-1])}}})},GMaps.prototype.travelRoute=function(options){if(options.origin&&options.destination)this.getRoutes({origin:options.origin,destination:options.destination,travelMode:options.travelMode,waypoints:options.waypoints,unitSystem:options.unitSystem,error:options.error,callback:function(e){if(e.length>0&&options.start&&options.start(e[e.length-1]),e.length>0&&options.step){var route=e[e.length-1];if(route.legs.length>0)for(var steps=route.legs[0].steps,i=0,step;step=steps[i];i++)step.step_number=i,options.step(step,route.legs[0].steps.length-1)}e.length>0&&options.end&&options.end(e[e.length-1])}});else if(options.route&&options.route.legs.length>0)for(var steps=options.route.legs[0].steps,i=0,step;step=steps[i];i++)step.step_number=i,options.step(step)},GMaps.prototype.drawSteppedRoute=function(options){var self=this;if(options.origin&&options.destination)this.getRoutes({origin:options.origin,destination:options.destination,travelMode:options.travelMode,waypoints:options.waypoints,error:options.error,callback:function(e){if(e.length>0&&options.start&&options.start(e[e.length-1]),e.length>0&&options.step){var route=e[e.length-1];if(route.legs.length>0)for(var steps=route.legs[0].steps,i=0,step;step=steps[i];i++){step.step_number=i;var polyline_options={path:step.path,strokeColor:options.strokeColor,strokeOpacity:options.strokeOpacity,strokeWeight:options.strokeWeight};options.hasOwnProperty("icons")&&(polyline_options.icons=options.icons),self.drawPolyline(polyline_options),options.step(step,route.legs[0].steps.length-1)}}e.length>0&&options.end&&options.end(e[e.length-1])}});else if(options.route&&options.route.legs.length>0)for(var steps=options.route.legs[0].steps,i=0,step;step=steps[i];i++){step.step_number=i;var polyline_options={path:step.path,strokeColor:options.strokeColor,strokeOpacity:options.strokeOpacity,strokeWeight:options.strokeWeight};options.hasOwnProperty("icons")&&(polyline_options.icons=options.icons),self.drawPolyline(polyline_options),options.step(step)}},GMaps.Route=function(options){this.origin=options.origin,this.destination=options.destination,this.waypoints=options.waypoints,this.map=options.map,this.route=options.route,this.step_count=0,this.steps=this.route.legs[0].steps,this.steps_length=this.steps.length;var polyline_options={path:new google.maps.MVCArray,strokeColor:options.strokeColor,strokeOpacity:options.strokeOpacity,strokeWeight:options.strokeWeight};options.hasOwnProperty("icons")&&(polyline_options.icons=options.icons),this.polyline=this.map.drawPolyline(polyline_options).getPath()},GMaps.Route.prototype.getRoute=function(options){var self=this;this.map.getRoutes({origin:this.origin,destination:this.destination,travelMode:options.travelMode,waypoints:this.waypoints||[],error:options.error,callback:function(){self.route=e[0],options.callback&&options.callback.call(self)}})},GMaps.Route.prototype.back=function(){if(this.step_count>0){this.step_count--;var path=this.route.legs[0].steps[this.step_count].path;for(var p in path)path.hasOwnProperty(p)&&this.polyline.pop()}},GMaps.Route.prototype.forward=function(){if(this.step_count<this.steps_length){var path=this.route.legs[0].steps[this.step_count].path;for(var p in path)path.hasOwnProperty(p)&&this.polyline.push(path[p]);this.step_count++}},GMaps.prototype.checkGeofence=function(lat,lng,fence){return fence.containsLatLng(new google.maps.LatLng(lat,lng))},GMaps.prototype.checkMarkerGeofence=function(marker,outside_callback){if(marker.fences)for(var i=0,fence;fence=marker.fences[i];i++){var pos=marker.getPosition();this.checkGeofence(pos.lat(),pos.lng(),fence)||outside_callback(marker,fence)}},GMaps.prototype.toImage=function(options){var options=options||{},static_map_options={};if(static_map_options.size=options.size||[this.el.clientWidth,this.el.clientHeight],static_map_options.lat=this.getCenter().lat(),static_map_options.lng=this.getCenter().lng(),this.markers.length>0){static_map_options.markers=[];for(var i=0;i<this.markers.length;i++)static_map_options.markers.push({lat:this.markers[i].getPosition().lat(),lng:this.markers[i].getPosition().lng()})}if(this.polylines.length>0){var polyline=this.polylines[0];static_map_options.polyline={},static_map_options.polyline.path=google.maps.geometry.encoding.encodePath(polyline.getPath()),static_map_options.polyline.strokeColor=polyline.strokeColor,static_map_options.polyline.strokeOpacity=polyline.strokeOpacity,static_map_options.polyline.strokeWeight=polyline.strokeWeight}return GMaps.staticMapURL(static_map_options)},GMaps.staticMapURL=function(options){function parseColor(color,opacity){if("#"===color[0]&&(color=color.replace("#","0x"),opacity)){if(opacity=parseFloat(opacity),opacity=Math.min(1,Math.max(opacity,0)),0===opacity)return"0x00000000";opacity=(255*opacity).toString(16),1===opacity.length&&(opacity+=opacity),color=color.slice(0,8)+opacity}return color}var parameters=[],data,static_root=("file:"===location.protocol?"http:":location.protocol)+"//maps.googleapis.com/maps/api/staticmap";options.url&&(static_root=options.url,delete options.url),static_root+="?";var markers=options.markers;delete options.markers,!markers&&options.marker&&(markers=[options.marker],delete options.marker);var styles=options.styles;delete options.styles;var polyline=options.polyline;if(delete options.polyline,options.center)parameters.push("center="+options.center),delete options.center;else if(options.address)parameters.push("center="+options.address),delete options.address;else if(options.lat)parameters.push(["center=",options.lat,",",options.lng].join("")),delete options.lat,delete options.lng;else if(options.visible){var visible=encodeURI(options.visible.join("|"));parameters.push("visible="+visible)}var size=options.size;size?(size.join&&(size=size.join("x")),delete options.size):size="630x300",parameters.push("size="+size),options.zoom||options.zoom===!1||(options.zoom=15);var sensor=options.hasOwnProperty("sensor")?!!options.sensor:!0;delete options.sensor,parameters.push("sensor="+sensor);for(var param in options)options.hasOwnProperty(param)&&parameters.push(param+"="+options[param]);if(markers)for(var marker,loc,i=0;data=markers[i];i++){marker=[],data.size&&"normal"!==data.size?(marker.push("size:"+data.size),delete data.size):data.icon&&(marker.push("icon:"+encodeURI(data.icon)),delete data.icon),data.color&&(marker.push("color:"+data.color.replace("#","0x")),delete data.color),data.label&&(marker.push("label:"+data.label[0].toUpperCase()),delete data.label),loc=data.address?data.address:data.lat+","+data.lng,delete data.address,delete data.lat,delete data.lng;for(var param in data)data.hasOwnProperty(param)&&marker.push(param+":"+data[param]);marker.length||0===i?(marker.push(loc),marker=marker.join("|"),parameters.push("markers="+encodeURI(marker))):(marker=parameters.pop()+encodeURI("|"+loc),parameters.push(marker))}if(styles)for(var i=0;i<styles.length;i++){var styleRule=[];styles[i].featureType&&styleRule.push("feature:"+styles[i].featureType.toLowerCase()),styles[i].elementType&&styleRule.push("element:"+styles[i].elementType.toLowerCase());for(var j=0;j<styles[i].stylers.length;j++)for(var p in styles[i].stylers[j]){var ruleArg=styles[i].stylers[j][p];"hue"!=p&&"color"!=p||(ruleArg="0x"+ruleArg.substring(1)),styleRule.push(p+":"+ruleArg)}var rule=styleRule.join("|");""!=rule&&parameters.push("style="+rule)}if(polyline){if(data=polyline,polyline=[],data.strokeWeight&&polyline.push("weight:"+parseInt(data.strokeWeight,10)),data.strokeColor){var color=parseColor(data.strokeColor,data.strokeOpacity);polyline.push("color:"+color)}if(data.fillColor){var fillcolor=parseColor(data.fillColor,data.fillOpacity);polyline.push("fillcolor:"+fillcolor)}var path=data.path;if(path.join)for(var j=0,pos;pos=path[j];j++)polyline.push(pos.join(","));else polyline.push("enc:"+path);polyline=polyline.join("|"),parameters.push("path="+encodeURI(polyline))}var dpi=window.devicePixelRatio||1;return parameters.push("scale="+dpi),parameters=parameters.join("&"),static_root+parameters},GMaps.prototype.addMapType=function(mapTypeId,options){if(!options.hasOwnProperty("getTileUrl")||"function"!=typeof options.getTileUrl)throw"'getTileUrl' function required.";options.tileSize=options.tileSize||new google.maps.Size(256,256);var mapType=new google.maps.ImageMapType(options);this.map.mapTypes.set(mapTypeId,mapType)},GMaps.prototype.addOverlayMapType=function(options){if(!options.hasOwnProperty("getTile")||"function"!=typeof options.getTile)throw"'getTile' function required.";var overlayMapTypeIndex=options.index;delete options.index,this.map.overlayMapTypes.insertAt(overlayMapTypeIndex,options)},GMaps.prototype.removeOverlayMapType=function(overlayMapTypeIndex){this.map.overlayMapTypes.removeAt(overlayMapTypeIndex)},GMaps.prototype.addStyle=function(options){var styledMapType=new google.maps.StyledMapType(options.styles,{name:options.styledMapName});this.map.mapTypes.set(options.mapTypeId,styledMapType)},GMaps.prototype.setStyle=function(mapTypeId){this.map.setMapTypeId(mapTypeId)},GMaps.prototype.createPanorama=function(streetview_options){return streetview_options.hasOwnProperty("lat")&&streetview_options.hasOwnProperty("lng")||(streetview_options.lat=this.getCenter().lat(),streetview_options.lng=this.getCenter().lng()),this.panorama=GMaps.createPanorama(streetview_options),this.map.setStreetView(this.panorama),this.panorama},GMaps.createPanorama=function(options){var el=getElementById(options.el,options.context);options.position=new google.maps.LatLng(options.lat,options.lng),delete options.el,delete options.context,delete options.lat,delete options.lng;for(var streetview_events=["closeclick","links_changed","pano_changed","position_changed","pov_changed","resize","visible_changed"],streetview_options=extend_object({visible:!0},options),i=0;i<streetview_events.length;i++)delete streetview_options[streetview_events[i]];for(var panorama=new google.maps.StreetViewPanorama(el,streetview_options),i=0;i<streetview_events.length;i++)!function(object,name){options[name]&&google.maps.event.addListener(object,name,function(){options[name].apply(this)})}(panorama,streetview_events[i]);return panorama},GMaps.prototype.on=function(event_name,handler){return GMaps.on(event_name,this,handler)},GMaps.prototype.off=function(event_name){GMaps.off(event_name,this)},GMaps.prototype.once=function(event_name,handler){return GMaps.once(event_name,this,handler)},GMaps.custom_events=["marker_added","marker_removed","polyline_added","polyline_removed","polygon_added","polygon_removed","geolocated","geolocation_failed"],GMaps.on=function(event_name,object,handler){if(-1==GMaps.custom_events.indexOf(event_name))return object instanceof GMaps&&(object=object.map),google.maps.event.addListener(object,event_name,handler);var registered_event={handler:handler,eventName:event_name};return object.registered_events[event_name]=object.registered_events[event_name]||[],object.registered_events[event_name].push(registered_event),registered_event},GMaps.off=function(event_name,object){-1==GMaps.custom_events.indexOf(event_name)?(object instanceof GMaps&&(object=object.map),google.maps.event.clearListeners(object,event_name)):object.registered_events[event_name]=[]},GMaps.once=function(event_name,object,handler){return-1==GMaps.custom_events.indexOf(event_name)?(object instanceof GMaps&&(object=object.map),google.maps.event.addListenerOnce(object,event_name,handler)):void 0},GMaps.fire=function(event_name,object,scope){if(-1==GMaps.custom_events.indexOf(event_name))google.maps.event.trigger(object,event_name,Array.prototype.slice.apply(arguments).slice(2));else if(event_name in scope.registered_events)for(var firing_events=scope.registered_events[event_name],i=0;i<firing_events.length;i++)!function(handler,scope,object){handler.apply(scope,[object])}(firing_events[i].handler,scope,object)},GMaps.geolocate=function(options){var complete_callback=options.always||options.complete;navigator.geolocation?navigator.geolocation.getCurrentPosition(function(position){options.success(position),complete_callback&&complete_callback()},function(error){options.error(error),complete_callback&&complete_callback()},options.options):(options.not_supported(),complete_callback&&complete_callback())},GMaps.geocode=function(options){this.geocoder=new google.maps.Geocoder;var callback=options.callback;options.hasOwnProperty("lat")&&options.hasOwnProperty("lng")&&(options.latLng=new google.maps.LatLng(options.lat,options.lng)),delete options.lat,delete options.lng,delete options.callback,this.geocoder.geocode(options,function(results,status){callback(results,status)})},"object"==typeof window.google&&window.google.maps&&(google.maps.Polygon.prototype.getBounds||(google.maps.Polygon.prototype.getBounds=function(latLng){for(var bounds=new google.maps.LatLngBounds,paths=this.getPaths(),path,p=0;p<paths.getLength();p++){path=paths.getAt(p);for(var i=0;i<path.getLength();i++)bounds.extend(path.getAt(i))}return bounds}),google.maps.Polygon.prototype.containsLatLng||(google.maps.Polygon.prototype.containsLatLng=function(latLng){var bounds=this.getBounds();if(null!==bounds&&!bounds.contains(latLng))return!1;for(var inPoly=!1,numPaths=this.getPaths().getLength(),p=0;numPaths>p;p++)for(var path=this.getPaths().getAt(p),numPoints=path.getLength(),j=numPoints-1,i=0;numPoints>i;i++){var vertex1=path.getAt(i),vertex2=path.getAt(j);(vertex1.lng()<latLng.lng()&&vertex2.lng()>=latLng.lng()||vertex2.lng()<latLng.lng()&&vertex1.lng()>=latLng.lng())&&vertex1.lat()+(latLng.lng()-vertex1.lng())/(vertex2.lng()-vertex1.lng())*(vertex2.lat()-vertex1.lat())<latLng.lat()&&(inPoly=!inPoly),j=i}return inPoly}),google.maps.Circle.prototype.containsLatLng||(google.maps.Circle.prototype.containsLatLng=function(latLng){return google.maps.geometry?google.maps.geometry.spherical.computeDistanceBetween(this.getCenter(),latLng)<=this.getRadius():!0}),google.maps.Rectangle.prototype.containsLatLng=function(latLng){return this.getBounds().contains(latLng)},google.maps.LatLngBounds.prototype.containsLatLng=function(latLng){return this.contains(latLng)},google.maps.Marker.prototype.setFences=function(fences){this.fences=fences},google.maps.Marker.prototype.addFence=function(fence){this.fences.push(fence)},google.maps.Marker.prototype.getId=function(){return this.__gm_id}),Array.prototype.indexOf||(Array.prototype.indexOf=function(searchElement){if(null==this)throw new TypeError;var t=Object(this),len=t.length>>>0;if(0===len)return-1;var n=0;if(arguments.length>1&&(n=Number(arguments[1]),n!=n?n=0:0!=n&&n!=1/0&&n!=-(1/0)&&(n=(n>0||-1)*Math.floor(Math.abs(n)))),n>=len)return-1;for(var k=n>=0?n:Math.max(len-Math.abs(n),0);len>k;k++)if(k in t&&t[k]===searchElement)return k;return-1}),GMaps}),/* ========================================
@preserve
05. Section slider MIT License
======================================== */
jQuery(document).ready(function($){function initBlockSlider(sliderContainers){sliderContainers.each(function(){var sliderContainer=$(this),slides=sliderContainer.children(".half-screen-slider__list").children("li"),sliderPagination=createSliderPagination(sliderContainer);sliderPagination.on("click",function(event){event.preventDefault();var selected=$(this),index=selected.index();updateSlider(index,sliderPagination,slides)}),sliderContainer.on("swipeleft",function(){var bool=enableSwipe(sliderContainer),visibleSlide=sliderContainer.find(".is-visible").last(),visibleSlideIndex=visibleSlide.index();!visibleSlide.is(":last-child")&&bool&&updateSlider(visibleSlideIndex+1,sliderPagination,slides)}),sliderContainer.on("swiperight",function(){var bool=enableSwipe(sliderContainer),visibleSlide=sliderContainer.find(".is-visible").last(),visibleSlideIndex=visibleSlide.index();!visibleSlide.is(":first-child")&&bool&&updateSlider(visibleSlideIndex-1,sliderPagination,slides)})})}function createSliderPagination(container){var wrapper=$('<ol class="half-screen-slider__nav"></ol>');return container.children(".half-screen-slider__list").find("li").each(function(index){var dotWrapper=$(0===index?'<li class="half-screen-slider__nav-item selected"></li>':'<li class="half-screen-slider__nav-item"></li>'),dot=$('<a class="half-screen-slider__nav-link" href="#0"></a>').appendTo(dotWrapper);dotWrapper.appendTo(wrapper);var dotText=10>index+1?"0"+(index+1):index+1;dot.text(dotText)}),wrapper.appendTo(container),wrapper.children("li")}function updateSlider(n,navigation,slides){navigation.removeClass("selected").eq(n).addClass("selected"),slides.eq(n).addClass("is-visible").removeClass("covered").prevAll("li").addClass("is-visible covered").end().nextAll("li").removeClass("is-visible covered"),navigation.parent("ul").addClass("slider-animating").on("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){$(this).removeClass("slider-animating")})}function enableSwipe(container){return container.parents(".touch").length>0}var sliderContainers=$(".half-screen-slider");sliderContainers.length>0&&initBlockSlider(sliderContainers)}),/* ========================================
12. jQuery Smooth Scroll - v1.7.2 - 2016-01-23
https://github.com/kswedberg/jquery-smooth-scroll
Copyright (c) 2016 Karl Swedberg
Licensed MIT
@preserve
======================================== */
function(factory){"function"==typeof define&&define.amd?define(["jquery"],factory):factory("object"==typeof module&&module.exports?require("jquery"):jQuery)}(function($){var version="1.7.2",optionOverrides={},defaults={exclude:[],excludeWithin:[],offset:0,direction:"top",delegateSelector:null,scrollElement:null,scrollTarget:null,beforeScroll:function(){},afterScroll:function(){},easing:"swing",speed:400,autoCoefficient:2,preventDefault:!0},getScrollable=function(opts){var scrollable=[],scrolled=!1,dir=opts.dir&&"left"===opts.dir?"scrollLeft":"scrollTop";return this.each(function(){var el=$(this);if(this!==document&&this!==window)return!document.scrollingElement||this!==document.documentElement&&this!==document.body?void(el[dir]()>0?scrollable.push(this):(el[dir](1),scrolled=el[dir]()>0,scrolled&&scrollable.push(this),el[dir](0))):(scrollable.push(document.scrollingElement),!1)}),scrollable.length||this.each(function(){this===document.documentElement&&"smooth"===$(this).css("scrollBehavior")&&(scrollable=[this]),scrollable.length||"BODY"!==this.nodeName||(scrollable=[this])}),"first"===opts.el&&scrollable.length>1&&(scrollable=[scrollable[0]]),scrollable};$.fn.extend({scrollable:function(dir){var scrl=getScrollable.call(this,{dir:dir});return this.pushStack(scrl)},firstScrollable:function(dir){var scrl=getScrollable.call(this,{el:"first",dir:dir});return this.pushStack(scrl)},smoothScroll:function(options,extra){if(options=options||{},"options"===options)return extra?this.each(function(){var $this=$(this),opts=$.extend($this.data("ssOpts")||{},extra);$(this).data("ssOpts",opts)}):this.first().data("ssOpts");var opts=$.extend({},$.fn.smoothScroll.defaults,options),clickHandler=function(event){var escapeSelector=function(str){return str.replace(/(:|\.|\/)/g,"\\$1")},link=this,$link=$(this),thisOpts=$.extend({},opts,$link.data("ssOpts")||{}),exclude=opts.exclude,excludeWithin=thisOpts.excludeWithin,elCounter=0,ewlCounter=0,include=!0,clickOpts={},locationPath=$.smoothScroll.filterPath(location.pathname),linkPath=$.smoothScroll.filterPath(link.pathname),hostMatch=location.hostname===link.hostname||!link.hostname,pathMatch=thisOpts.scrollTarget||linkPath===locationPath,thisHash=escapeSelector(link.hash);if(thisHash&&!$(thisHash).length&&(include=!1),thisOpts.scrollTarget||hostMatch&&pathMatch&&thisHash){for(;include&&elCounter<exclude.length;)$link.is(escapeSelector(exclude[elCounter++]))&&(include=!1);for(;include&&ewlCounter<excludeWithin.length;)$link.closest(excludeWithin[ewlCounter++]).length&&(include=!1)}else include=!1;include&&(thisOpts.preventDefault&&event.preventDefault(),$.extend(clickOpts,thisOpts,{scrollTarget:thisOpts.scrollTarget||thisHash,link:link}),$.smoothScroll(clickOpts))};return null!==options.delegateSelector?this.undelegate(options.delegateSelector,"click.smoothscroll").delegate(options.delegateSelector,"click.smoothscroll",clickHandler):this.unbind("click.smoothscroll").bind("click.smoothscroll",clickHandler),this}}),$.smoothScroll=function(options,px){if("options"===options&&"object"==typeof px)return $.extend(optionOverrides,px);var opts,$scroller,scrollTargetOffset,speed,delta,scrollerOffset=0,offPos="offset",scrollDir="scrollTop",aniProps={},aniOpts={};"number"==typeof options?(opts=$.extend({link:null},$.fn.smoothScroll.defaults,optionOverrides),scrollTargetOffset=options):(opts=$.extend({link:null},$.fn.smoothScroll.defaults,options||{},optionOverrides),opts.scrollElement&&(offPos="position","static"===opts.scrollElement.css("position")&&opts.scrollElement.css("position","relative"))),scrollDir="left"===opts.direction?"scrollLeft":scrollDir,opts.scrollElement?($scroller=opts.scrollElement,/^(?:HTML|BODY)$/.test($scroller[0].nodeName)||(scrollerOffset=$scroller[scrollDir]())):$scroller=$("html, body").firstScrollable(opts.direction),opts.beforeScroll.call($scroller,opts),scrollTargetOffset="number"==typeof options?options:px||$(opts.scrollTarget)[offPos]()&&$(opts.scrollTarget)[offPos]()[opts.direction]||0,aniProps[scrollDir]=scrollTargetOffset+scrollerOffset+opts.offset,speed=opts.speed,"auto"===speed&&(delta=Math.abs(aniProps[scrollDir]-$scroller[scrollDir]()),speed=delta/opts.autoCoefficient),aniOpts={duration:speed,easing:opts.easing,complete:function(){opts.afterScroll.call(opts.link,opts)}},opts.step&&(aniOpts.step=opts.step),$scroller.length?$scroller.stop().animate(aniProps,aniOpts):opts.afterScroll.call(opts.link,opts)},$.smoothScroll.version=version,$.smoothScroll.filterPath=function(string){return string=string||"",string.replace(/^\//,"").replace(/(?:index|default).[a-zA-Z]{3,4}$/,"").replace(/\/$/,"")},$.fn.smoothScroll.defaults=defaults}),/* ========================================
@preserve
06. jQuery Cycle2; version: 2.1.6 build: 20141007
http://jquery.malsup.com/cycle2/
Copyright (c) 2014 M. Alsup; Dual licensed: MIT/GPL
======================================== */
function($){function lowerCase(s){return(s||"").toLowerCase()}var version="2.1.6";$.fn.cycle=function(options){var o;return 0!==this.length||$.isReady?this.each(function(){var data,opts,shortName,val,container=$(this),log=$.fn.cycle.log;if(!container.data("cycle.opts")){(container.data("cycle-log")===!1||options&&options.log===!1||opts&&opts.log===!1)&&(log=$.noop),log("--c2 init--"),data=container.data();for(var p in data)data.hasOwnProperty(p)&&/^cycle[A-Z]+/.test(p)&&(val=data[p],shortName=p.match(/^cycle(.*)/)[1].replace(/^[A-Z]/,lowerCase),log(shortName+":",val,"("+typeof val+")"),data[shortName]=val);opts=$.extend({},$.fn.cycle.defaults,data,options||{}),opts.timeoutId=0,opts.paused=opts.paused||!1,opts.container=container,opts._maxZ=opts.maxZ,opts.API=$.extend({_container:container},$.fn.cycle.API),opts.API.log=log,opts.API.trigger=function(eventName,args){return opts.container.trigger(eventName,args),opts.API},container.data("cycle.opts",opts),container.data("cycle.API",opts.API),opts.API.trigger("cycle-bootstrap",[opts,opts.API]),opts.API.addInitialSlides(),opts.API.preInitSlideshow(),opts.slides.length&&opts.API.initSlideshow()}}):(o={s:this.selector,c:this.context},$.fn.cycle.log("requeuing slideshow (dom not ready)"),$(function(){$(o.s,o.c).cycle(options)}),this)},$.fn.cycle.API={opts:function(){return this._container.data("cycle.opts")},addInitialSlides:function(){var opts=this.opts(),slides=opts.slides;opts.slideCount=0,opts.slides=$(),slides=slides.jquery?slides:opts.container.find(slides),opts.random&&slides.sort(function(){return Math.random()-.5}),opts.API.add(slides)},preInitSlideshow:function(){var opts=this.opts();opts.API.trigger("cycle-pre-initialize",[opts]);var tx=$.fn.cycle.transitions[opts.fx];tx&&$.isFunction(tx.preInit)&&tx.preInit(opts),opts._preInitialized=!0},postInitSlideshow:function(){var opts=this.opts();opts.API.trigger("cycle-post-initialize",[opts]);var tx=$.fn.cycle.transitions[opts.fx];tx&&$.isFunction(tx.postInit)&&tx.postInit(opts)},initSlideshow:function(){var opts=this.opts(),pauseObj=opts.container,slideOpts;opts.API.calcFirstSlide(),"static"==opts.container.css("position")&&opts.container.css("position","relative"),$(opts.slides[opts.currSlide]).css({opacity:1,display:"block",visibility:"visible"}),opts.API.stackSlides(opts.slides[opts.currSlide],opts.slides[opts.nextSlide],!opts.reverse),opts.pauseOnHover&&(opts.pauseOnHover!==!0&&(pauseObj=$(opts.pauseOnHover)),pauseObj.on("hover",function(){opts.API.pause(!0)},function(){opts.API.resume(!0)})),opts.timeout&&(slideOpts=opts.API.getSlideOpts(opts.currSlide),opts.API.queueTransition(slideOpts,slideOpts.timeout+opts.delay)),opts._initialized=!0,opts.API.updateView(!0),opts.API.trigger("cycle-initialized",[opts]),opts.API.postInitSlideshow()},pause:function(hover){var opts=this.opts(),slideOpts=opts.API.getSlideOpts(),alreadyPaused=opts.hoverPaused||opts.paused;hover?opts.hoverPaused=!0:opts.paused=!0,alreadyPaused||(opts.container.addClass("cycle-paused"),opts.API.trigger("cycle-paused",[opts]).log("cycle-paused"),slideOpts.timeout&&(clearTimeout(opts.timeoutId),opts.timeoutId=0,opts._remainingTimeout-=$.now()-opts._lastQueue,(opts._remainingTimeout<0||isNaN(opts._remainingTimeout))&&(opts._remainingTimeout=void 0)))},resume:function(hover){var opts=this.opts(),alreadyResumed=!opts.hoverPaused&&!opts.paused,remaining;hover?opts.hoverPaused=!1:opts.paused=!1,alreadyResumed||(opts.container.removeClass("cycle-paused"),0===opts.slides.filter(":animated").length&&opts.API.queueTransition(opts.API.getSlideOpts(),opts._remainingTimeout),opts.API.trigger("cycle-resumed",[opts,opts._remainingTimeout]).log("cycle-resumed"))},add:function(slides,prepend){var opts=this.opts(),oldSlideCount=opts.slideCount,startSlideshow=!1,len;"string"==$.type(slides)&&(slides=$.trim(slides)),$(slides).each(function(i){var slideOpts,slide=$(this);prepend?opts.container.prepend(slide):opts.container.append(slide),opts.slideCount++,slideOpts=opts.API.buildSlideOpts(slide),prepend?opts.slides=$(slide).add(opts.slides):opts.slides=opts.slides.add(slide),opts.API.initSlide(slideOpts,slide,--opts._maxZ),slide.data("cycle.opts",slideOpts),opts.API.trigger("cycle-slide-added",[opts,slideOpts,slide])}),opts.API.updateView(!0),startSlideshow=opts._preInitialized&&2>oldSlideCount&&opts.slideCount>=1,startSlideshow&&(opts._initialized?opts.timeout&&(len=opts.slides.length,opts.nextSlide=opts.reverse?len-1:1,opts.timeoutId||opts.API.queueTransition(opts)):opts.API.initSlideshow())},calcFirstSlide:function(){var opts=this.opts(),firstSlideIndex;firstSlideIndex=parseInt(opts.startingSlide||0,10),(firstSlideIndex>=opts.slides.length||0>firstSlideIndex)&&(firstSlideIndex=0),opts.currSlide=firstSlideIndex,opts.reverse?(opts.nextSlide=firstSlideIndex-1,opts.nextSlide<0&&(opts.nextSlide=opts.slides.length-1)):(opts.nextSlide=firstSlideIndex+1,opts.nextSlide==opts.slides.length&&(opts.nextSlide=0))},calcNextSlide:function(){var opts=this.opts(),roll;opts.reverse?(roll=opts.nextSlide-1<0,opts.nextSlide=roll?opts.slideCount-1:opts.nextSlide-1,opts.currSlide=roll?0:opts.nextSlide+1):(roll=opts.nextSlide+1==opts.slides.length,opts.nextSlide=roll?0:opts.nextSlide+1,opts.currSlide=roll?opts.slides.length-1:opts.nextSlide-1)},calcTx:function(slideOpts,manual){var opts=slideOpts,tx;return opts._tempFx?tx=$.fn.cycle.transitions[opts._tempFx]:manual&&opts.manualFx&&(tx=$.fn.cycle.transitions[opts.manualFx]),tx||(tx=$.fn.cycle.transitions[opts.fx]),opts._tempFx=null,this.opts()._tempFx=null,tx||(tx=$.fn.cycle.transitions.fade,opts.API.log('Transition "'+opts.fx+'" not found.  Using fade.')),tx},prepareTx:function(manual,fwd){var opts=this.opts(),after,curr,next,slideOpts,tx;return opts.slideCount<2?void(opts.timeoutId=0):(!manual||opts.busy&&!opts.manualTrump||(opts.API.stopTransition(),opts.busy=!1,clearTimeout(opts.timeoutId),opts.timeoutId=0),void(opts.busy||(0!==opts.timeoutId||manual)&&(curr=opts.slides[opts.currSlide],next=opts.slides[opts.nextSlide],slideOpts=opts.API.getSlideOpts(opts.nextSlide),tx=opts.API.calcTx(slideOpts,manual),opts._tx=tx,manual&&void 0!==slideOpts.manualSpeed&&(slideOpts.speed=slideOpts.manualSpeed),opts.nextSlide!=opts.currSlide&&(manual||!opts.paused&&!opts.hoverPaused&&opts.timeout)?(opts.API.trigger("cycle-before",[slideOpts,curr,next,fwd]),tx.before&&tx.before(slideOpts,curr,next,fwd),after=function(){opts.busy=!1,opts.container.data("cycle.opts")&&(tx.after&&tx.after(slideOpts,curr,next,fwd),opts.API.trigger("cycle-after",[slideOpts,curr,next,fwd]),opts.API.queueTransition(slideOpts),opts.API.updateView(!0))},opts.busy=!0,tx.transition?tx.transition(slideOpts,curr,next,fwd,after):opts.API.doTransition(slideOpts,curr,next,fwd,after),opts.API.calcNextSlide(),opts.API.updateView()):opts.API.queueTransition(slideOpts))))},doTransition:function(slideOpts,currEl,nextEl,fwd,callback){var opts=slideOpts,curr=$(currEl),next=$(nextEl),fn=function(){next.animate(opts.animIn||{opacity:1},opts.speed,opts.easeIn||opts.easing,callback)};next.css(opts.cssBefore||{}),curr.animate(opts.animOut||{},opts.speed,opts.easeOut||opts.easing,function(){curr.css(opts.cssAfter||{}),opts.sync||fn()}),opts.sync&&fn()},queueTransition:function(slideOpts,specificTimeout){var opts=this.opts(),timeout=void 0!==specificTimeout?specificTimeout:slideOpts.timeout;return 0===opts.nextSlide&&0===--opts.loop?(opts.API.log("terminating; loop=0"),opts.timeout=0,timeout?setTimeout(function(){opts.API.trigger("cycle-finished",[opts])},timeout):opts.API.trigger("cycle-finished",[opts]),void(opts.nextSlide=opts.currSlide)):void 0!==opts.continueAuto&&(opts.continueAuto===!1||$.isFunction(opts.continueAuto)&&opts.continueAuto()===!1)?(opts.API.log("terminating automatic transitions"),opts.timeout=0,void(opts.timeoutId&&clearTimeout(opts.timeoutId))):void(timeout&&(opts._lastQueue=$.now(),void 0===specificTimeout&&(opts._remainingTimeout=slideOpts.timeout),opts.paused||opts.hoverPaused||(opts.timeoutId=setTimeout(function(){opts.API.prepareTx(!1,!opts.reverse)},timeout))))},stopTransition:function(){var opts=this.opts();opts.slides.filter(":animated").length&&(opts.slides.stop(!1,!0),opts.API.trigger("cycle-transition-stopped",[opts])),opts._tx&&opts._tx.stopTransition&&opts._tx.stopTransition(opts)},advanceSlide:function(val){var opts=this.opts();return clearTimeout(opts.timeoutId),opts.timeoutId=0,opts.nextSlide=opts.currSlide+val,opts.nextSlide<0?opts.nextSlide=opts.slides.length-1:opts.nextSlide>=opts.slides.length&&(opts.nextSlide=0),opts.API.prepareTx(!0,val>=0),!1},buildSlideOpts:function(slide){var opts=this.opts(),val,shortName,slideOpts=slide.data()||{};for(var p in slideOpts)slideOpts.hasOwnProperty(p)&&/^cycle[A-Z]+/.test(p)&&(val=slideOpts[p],shortName=p.match(/^cycle(.*)/)[1].replace(/^[A-Z]/,lowerCase),opts.API.log("["+(opts.slideCount-1)+"]",shortName+":",val,"("+typeof val+")"),slideOpts[shortName]=val);slideOpts=$.extend({},$.fn.cycle.defaults,opts,slideOpts),slideOpts.slideNum=opts.slideCount;try{delete slideOpts.API,delete slideOpts.slideCount,delete slideOpts.currSlide,delete slideOpts.nextSlide,delete slideOpts.slides}catch(e){}return slideOpts},getSlideOpts:function(index){var opts=this.opts();void 0===index&&(index=opts.currSlide);var slide=opts.slides[index],slideOpts=$(slide).data("cycle.opts");return $.extend({},opts,slideOpts)},initSlide:function(slideOpts,slide,suggestedZindex){var opts=this.opts();slide.css(slideOpts.slideCss||{}),suggestedZindex>0&&slide.css("zIndex",suggestedZindex),isNaN(slideOpts.speed)&&(slideOpts.speed=$.fx.speeds[slideOpts.speed]||$.fx.speeds._default),slideOpts.sync||(slideOpts.speed=slideOpts.speed/2),slide.addClass(opts.slideClass)},updateView:function(isAfter,isDuring,forceEvent){var opts=this.opts();if(opts._initialized){var slideOpts=opts.API.getSlideOpts(),currSlide=opts.slides[opts.currSlide];!isAfter&&isDuring!==!0&&(opts.API.trigger("cycle-update-view-before",[opts,slideOpts,currSlide]),opts.updateView<0)||(opts.slideActiveClass&&opts.slides.removeClass(opts.slideActiveClass).eq(opts.currSlide).addClass(opts.slideActiveClass),isAfter&&opts.hideNonActive&&opts.slides.filter(":not(."+opts.slideActiveClass+")").css("visibility","hidden"),0===opts.updateView&&setTimeout(function(){opts.API.trigger("cycle-update-view",[opts,slideOpts,currSlide,isAfter])},slideOpts.speed/(opts.sync?2:1)),0!==opts.updateView&&opts.API.trigger("cycle-update-view",[opts,slideOpts,currSlide,isAfter]),isAfter&&opts.API.trigger("cycle-update-view-after",[opts,slideOpts,currSlide]))}},getComponent:function(name){var opts=this.opts(),selector=opts[name];if(/^\s*[\>|\+|~]/.test(selector))return opts.container.find(selector);var inParent=opts.container.parent().find(selector);return inParent.length>0?inParent:$(selector);return selector.jquery?selector:$(selector)},stackSlides:function(curr,next,fwd){var opts=this.opts();curr||(curr=opts.slides[opts.currSlide],next=opts.slides[opts.nextSlide],fwd=!opts.reverse),$(curr).css("zIndex",opts.maxZ);var i,z=opts.maxZ-2,len=opts.slideCount;if(fwd){for(i=opts.currSlide+1;len>i;i++)$(opts.slides[i]).css("zIndex",z--);for(i=0;i<opts.currSlide;i++)$(opts.slides[i]).css("zIndex",z--)}else{for(i=opts.currSlide-1;i>=0;i--)$(opts.slides[i]).css("zIndex",z--);for(i=len-1;i>opts.currSlide;i--)$(opts.slides[i]).css("zIndex",z--)}$(next).css("zIndex",opts.maxZ-1)},getSlideIndex:function(el){return this.opts().slides.index(el)}},$.fn.cycle.log=function log(){window.console&&console.log&&console.log("[cycle2] "+Array.prototype.join.call(arguments," "))},$.fn.cycle.version=function(){return"Cycle2: "+version},$.fn.cycle.transitions={custom:{},none:{before:function(opts,curr,next,fwd){opts.API.stackSlides(next,curr,fwd),opts.cssBefore={opacity:1,visibility:"visible",display:"block"}}},fade:{before:function(opts,curr,next,fwd){var css=opts.API.getSlideOpts(opts.nextSlide).slideCss||{};opts.API.stackSlides(curr,next,fwd),opts.cssBefore=$.extend(css,{opacity:0,visibility:"visible",display:"block"}),opts.animIn={opacity:1},opts.animOut={opacity:0}}},fadeout:{before:function(opts,curr,next,fwd){var css=opts.API.getSlideOpts(opts.nextSlide).slideCss||{};opts.API.stackSlides(curr,next,fwd),opts.cssBefore=$.extend(css,{opacity:1,visibility:"visible",display:"block"}),opts.animOut={opacity:0}}},scrollHorz:{before:function(opts,curr,next,fwd){opts.API.stackSlides(curr,next,fwd);var w=opts.container.css("overflow","hidden").width();opts.cssBefore={left:fwd?w:-w,top:0,opacity:1,visibility:"visible",display:"block"},opts.cssAfter={zIndex:opts._maxZ-2,left:0},opts.animIn={left:0},opts.animOut={left:fwd?-w:w}}}},$.fn.cycle.defaults={allowWrap:!0,autoSelector:".ensemble-slideshow",delay:0,easing:null,fx:"fade",hideNonActive:!0,loop:0,manualFx:void 0,manualSpeed:void 0,manualTrump:!0,maxZ:100,pauseOnHover:!1,reverse:!1,slideActiveClass:"ensemble-slideshow__active-slide",slideClass:"",slideCss:{position:"absolute",top:0,left:0},slides:"> img",speed:500,startingSlide:0,sync:!0,timeout:4e3,updateView:0},$(document).ready(function(){$($.fn.cycle.defaults.autoSelector).cycle()})}(jQuery),function($){function initAutoHeight(e,opts){var clone,height,sentinelIndex,autoHeight=opts.autoHeight;if("container"===autoHeight)height=$(opts.slides[opts.currSlide]).outerHeight(),opts.container.height(height);else if(opts._autoHeightRatio)opts.container.height(opts.container.width()/opts._autoHeightRatio);else if("calc"===autoHeight||"number"==$.type(autoHeight)&&autoHeight>=0){if(sentinelIndex="calc"===autoHeight?calcSentinelIndex(e,opts):autoHeight>=opts.slides.length?0:autoHeight,sentinelIndex===opts._sentinelIndex)return;opts._sentinelIndex=sentinelIndex,opts._sentinel&&opts._sentinel.remove(),clone=$(opts.slides[sentinelIndex].cloneNode(!0)),clone.removeAttr("id name rel").find("[id],[name],[rel]").removeAttr("id name rel"),clone.css({position:"static",visibility:"hidden",display:"block"}).prependTo(opts.container).addClass("cycle-sentinel cycle-slide").removeClass("cycle-slide-active"),clone.find("*").css("visibility","hidden"),opts._sentinel=clone}}function calcSentinelIndex(e,opts){var index=0,max=-1;return opts.slides.each(function(i){var h=$(this).height();h>max&&(max=h,index=i)}),index}function onBefore(e,opts,outgoing,incoming,forward){var h=$(incoming).outerHeight();opts.container.animate({height:h},opts.autoHeightSpeed,opts.autoHeightEasing)}function onDestroy(e,opts){opts._autoHeightOnResize&&($(window).off("resize orientationchange",opts._autoHeightOnResize),opts._autoHeightOnResize=null),opts.container.off("cycle-slide-added cycle-slide-removed",initAutoHeight),opts.container.off("cycle-destroyed",onDestroy),opts.container.off("cycle-before",onBefore),opts._sentinel&&(opts._sentinel.remove(),opts._sentinel=null)}$.extend($.fn.cycle.defaults,{autoHeight:0,autoHeightSpeed:250,autoHeightEasing:null}),$(document).on("cycle-initialized",function(e,opts){function onResize(){initAutoHeight(e,opts)}var autoHeight=opts.autoHeight,t=$.type(autoHeight),resizeThrottle=null,ratio;"string"!==t&&"number"!==t||(opts.container.on("cycle-slide-added cycle-slide-removed",initAutoHeight),opts.container.on("cycle-destroyed",onDestroy),"container"===autoHeight?opts.container.on("cycle-before",onBefore):"string"===t&&/\d+\:\d+/.test(autoHeight)&&(ratio=autoHeight.match(/(\d+)\:(\d+)/),ratio=ratio[1]/ratio[2],opts._autoHeightRatio=ratio),"number"!==t&&(opts._autoHeightOnResize=function(){clearTimeout(resizeThrottle),resizeThrottle=setTimeout(onResize,50)},$(window).on("resize orientationchange",opts._autoHeightOnResize)),setTimeout(onResize,30))})}(jQuery),function($){$.extend($.fn.cycle.defaults,{caption:"> .cycle-caption",captionTemplate:"{{slideNum}} / {{slideCount}}",overlay:"> .cycle-overlay",overlayTemplate:"<div>{{title}}</div><div>{{desc}}</div>",captionModule:"caption"}),$(document).on("cycle-update-view",function(e,opts,slideOpts,currSlide){if("caption"===opts.captionModule){var el;$.each(["caption","overlay"],function(){var name=this,template=slideOpts[name+"Template"],el=opts.API.getComponent(name);el.length&&template?(el.html(opts.API.tmpl(template,slideOpts,opts,currSlide)),el.show()):el.hide()})}}),$(document).on("cycle-destroyed",function(e,opts){var el;$.each(["caption","overlay"],function(){var name=this,template=opts[name+"Template"];opts[name]&&template&&(el=opts.API.getComponent("caption"),el.empty())})})}(jQuery),function($){var c2=$.fn.cycle;$.fn.cycle=function(options){var cmd,cmdFn,opts,args=$.makeArray(arguments);return"number"===$.type(options)?this.cycle("goto",options):"string"===$.type(options)?this.each(function(){var cmdArgs;return cmd=options,opts=$(this).data("cycle.opts"),void 0===opts?void c2.log('slideshow must be initialized before sending commands; "'+cmd+'" ignored'):(cmd="goto"===cmd?"jump":cmd,cmdFn=opts.API[cmd],$.isFunction(cmdFn)?(cmdArgs=$.makeArray(args),cmdArgs.shift(),cmdFn.apply(opts.API,cmdArgs)):void c2.log("unknown command: ",cmd))}):c2.apply(this,arguments)},$.extend($.fn.cycle,c2),$.extend(c2.API,{next:function(){var opts=this.opts();if(!opts.busy||opts.manualTrump){var count=opts.reverse?-1:1;opts.allowWrap===!1&&opts.currSlide+count>=opts.slideCount||(opts.API.advanceSlide(count),opts.API.trigger("cycle-next",[opts]).log("cycle-next"))}},prev:function(){var opts=this.opts();if(!opts.busy||opts.manualTrump){var count=opts.reverse?1:-1;opts.allowWrap===!1&&opts.currSlide+count<0||(opts.API.advanceSlide(count),opts.API.trigger("cycle-prev",[opts]).log("cycle-prev"))}},destroy:function(){this.stop();var opts=this.opts(),clean=$.isFunction($._data)?$._data:$.noop;clearTimeout(opts.timeoutId),opts.timeoutId=0,opts.API.stop(),opts.API.trigger("cycle-destroyed",[opts]).log("cycle-destroyed"),opts.container.removeData(),clean(opts.container[0],"parsedAttrs",!1),opts.retainStylesOnDestroy||(opts.container.removeAttr("style"),opts.slides.removeAttr("style"),opts.slides.removeClass(opts.slideActiveClass)),opts.slides.each(function(){var slide=$(this);slide.removeData(),slide.removeClass(opts.slideClass),clean(this,"parsedAttrs",!1)})},jump:function(index,fx){var fwd,opts=this.opts();if(!opts.busy||opts.manualTrump){var num=parseInt(index,10);if(isNaN(num)||0>num||num>=opts.slides.length)return void opts.API.log("goto: invalid slide index: "+num);if(num===opts.currSlide)return void opts.API.log("goto: skipping, already on slide",num);opts.nextSlide=num,clearTimeout(opts.timeoutId),opts.timeoutId=0,opts.API.log("goto: ",num," (zero-index)"),fwd=opts.currSlide<opts.nextSlide,opts._tempFx=fx,opts.API.prepareTx(!0,fwd)}},stop:function(){var opts=this.opts(),pauseObj=opts.container;clearTimeout(opts.timeoutId),opts.timeoutId=0,opts.API.stopTransition(),opts.pauseOnHover&&(opts.pauseOnHover!==!0&&(pauseObj=$(opts.pauseOnHover)),pauseObj.off("mouseenter mouseleave")),opts.API.trigger("cycle-stopped",[opts]).log("cycle-stopped")},reinit:function(){var opts=this.opts();opts.API.destroy(),opts.container.cycle()},remove:function(index){for(var opts=this.opts(),slide,slideToRemove,slides=[],slideNum=1,i=0;i<opts.slides.length;i++)slide=opts.slides[i],i===index?slideToRemove=slide:(slides.push(slide),$(slide).data("cycle.opts").slideNum=slideNum,slideNum++);slideToRemove&&(opts.slides=$(slides),opts.slideCount--,$(slideToRemove).remove(),index===opts.currSlide?opts.API.advanceSlide(1):index<opts.currSlide?opts.currSlide--:opts.currSlide++,opts.API.trigger("cycle-slide-removed",[opts,index,slideToRemove]).log("cycle-slide-removed"),opts.API.updateView())}}),$(document).on("click.cycle","[data-cycle-cmd]",function(e){e.preventDefault();var el=$(this),command=el.data("cycle-cmd"),context=el.data("cycle-context")||".cycle-slideshow";$(context).cycle(command,el.data("cycle-arg"))})}(jQuery),function($){function onHashChange(opts,setStartingSlide){var hash;return opts._hashFence?void(opts._hashFence=!1):(hash=window.location.hash.substring(1),void opts.slides.each(function(i){if($(this).data("cycle-hash")===hash){if(setStartingSlide===!0)opts.startingSlide=i;else{var fwd=opts.currSlide<i;opts.nextSlide=i,opts.API.prepareTx(!0,fwd)}return!1}}))}$(document).on("cycle-pre-initialize",function(e,opts){onHashChange(opts,!0),opts._onHashChange=function(){onHashChange(opts,!1)},$(window).on("hashchange",opts._onHashChange)}),$(document).on("cycle-update-view",function(e,opts,slideOpts){slideOpts.hash&&"#"+slideOpts.hash!==window.location.hash&&(opts._hashFence=!0,window.location.hash=slideOpts.hash)}),$(document).on("cycle-destroyed",function(e,opts){opts._onHashChange&&$(window).off("hashchange",opts._onHashChange)})}(jQuery),function($){$.extend($.fn.cycle.defaults,{loader:!1}),$(document).on("cycle-bootstrap",function(e,opts){function add(slides,prepend){function addSlide(slide){var curr;"wait"===opts.loader?(slideArr.push(slide),0===slideCount&&(slideArr.sort(sorter),addFn.apply(opts.API,[slideArr,prepend]),opts.container.removeClass("cycle-loading"))):(curr=$(opts.slides[opts.currSlide]),addFn.apply(opts.API,[slide,prepend]),curr.show(),opts.container.removeClass("cycle-loading"))}function sorter(a,b){return a.data("index")-b.data("index")}var slideArr=[];if("string"===$.type(slides))slides=$.trim(slides);else if("array"===$.type(slides))for(var i=0;i<slides.length;i++)slides[i]=$(slides[i])[0];slides=$(slides);var slideCount=slides.length;slideCount&&(slides.css("visibility","hidden").appendTo("body").each(function(i){function imageLoaded(){0===--count&&(--slideCount,addSlide(slide))}var count=0,slide=$(this),images=slide.is("img")?slide:slide.find("img");return slide.data("index",i),images=images.filter(":not(.cycle-loader-ignore)").filter(':not([src=""])'),images.length?(count=images.length,void images.each(function(){this.complete?imageLoaded():$(this).load(function(){imageLoaded()}).on("error",function(){0===--count&&(opts.API.log("slide skipped; img not loaded:",this.src),0===--slideCount&&"wait"===opts.loader&&addFn.apply(opts.API,[slideArr,prepend]))})})):(--slideCount,void slideArr.push(slide))}),slideCount&&opts.container.addClass("cycle-loading"))}var addFn;opts.loader&&(addFn=opts.API.add,opts.API.add=add)})}(jQuery),function($){function buildPagerLink(opts,slideOpts,slide){var pagerLink,pagers=opts.API.getComponent("pager");pagers.each(function(){var pager=$(this);if(slideOpts.pagerTemplate){var markup=opts.API.tmpl(slideOpts.pagerTemplate,slideOpts,opts,slide[0]);pagerLink=$(markup).appendTo(pager)}else pagerLink=pager.children().eq(opts.slideCount-1);pagerLink.on(opts.pagerEvent,function(e){opts.pagerEventBubble||e.preventDefault(),opts.API.page(pager,e.currentTarget)})})}function page(pager,target){var opts=this.opts();if(!opts.busy||opts.manualTrump){var index=pager.children().index(target),nextSlide=index,fwd=opts.currSlide<nextSlide;opts.currSlide!==nextSlide&&(opts.nextSlide=nextSlide,opts._tempFx=opts.pagerFx,opts.API.prepareTx(!0,fwd),opts.API.trigger("cycle-pager-activated",[opts,pager,target]))}}$.extend($.fn.cycle.defaults,{pager:"> .ensemble-slideshow__pager",pagerActiveClass:"ensemble-slideshow__pager-item-active",pagerEvent:"click.cycle",pagerEventBubble:void 0,pagerTemplate:'<span class="ensemble-slideshow__pager-item"></span>'}),$(document).on("cycle-bootstrap",function(e,opts,API){API.buildPagerLink=buildPagerLink}),$(document).on("cycle-slide-added",function(e,opts,slideOpts,slideAdded){opts.pager&&(opts.API.buildPagerLink(opts,slideOpts,slideAdded),opts.API.page=page)}),$(document).on("cycle-slide-removed",function(e,opts,index,slideRemoved){if(opts.pager){var pagers=opts.API.getComponent("pager");pagers.each(function(){var pager=$(this);$(pager.children()[index]).remove()})}}),$(document).on("cycle-update-view",function(e,opts,slideOpts){var pagers;opts.pager&&(pagers=opts.API.getComponent("pager"),pagers.each(function(){$(this).children().removeClass(opts.pagerActiveClass).eq(opts.currSlide).addClass(opts.pagerActiveClass)}))}),$(document).on("cycle-destroyed",function(e,opts){var pager=opts.API.getComponent("pager");pager&&(pager.children().off(opts.pagerEvent),opts.pagerTemplate&&pager.empty())})}(jQuery),function($){$.extend($.fn.cycle.defaults,{next:"> .cycle-next",nextEvent:"click.cycle",disabledClass:"disabled",prev:"> .cycle-prev",prevEvent:"click.cycle",swipe:!1}),$(document).on("cycle-initialized",function(e,opts){if(opts.API.getComponent("next").on(opts.nextEvent,function(e){e.preventDefault(),opts.API.next()}),opts.API.getComponent("prev").on(opts.prevEvent,function(e){e.preventDefault(),opts.API.prev()}),opts.swipe){var nextEvent=opts.swipeVert?"swipeUp.cycle":"swipeLeft.cycle swipeleft.cycle",prevEvent=opts.swipeVert?"swipeDown.cycle":"swipeRight.cycle swiperight.cycle";opts.container.on(nextEvent,function(e){opts._tempFx=opts.swipeFx,opts.API.next()}),opts.container.on(prevEvent,function(){opts._tempFx=opts.swipeFx,opts.API.prev()})}}),$(document).on("cycle-update-view",function(e,opts,slideOpts,currSlide){if(!opts.allowWrap){var cls=opts.disabledClass,next=opts.API.getComponent("next"),prev=opts.API.getComponent("prev"),prevBoundry=opts._prevBoundry||0,nextBoundry=void 0!==opts._nextBoundry?opts._nextBoundry:opts.slideCount-1;opts.currSlide===nextBoundry?next.addClass(cls).prop("disabled",!0):next.removeClass(cls).prop("disabled",!1),opts.currSlide===prevBoundry?prev.addClass(cls).prop("disabled",!0):prev.removeClass(cls).prop("disabled",!1)}}),$(document).on("cycle-destroyed",function(e,opts){opts.API.getComponent("prev").off(opts.nextEvent),opts.API.getComponent("next").off(opts.prevEvent),opts.container.off("swipeleft.cycle swiperight.cycle swipeLeft.cycle swipeRight.cycle swipeUp.cycle swipeDown.cycle")})}(jQuery),function($){$.extend($.fn.cycle.defaults,{progressive:!1}),$(document).on("cycle-pre-initialize",function(e,opts){if(opts.progressive){var API=opts.API,nextFn=API.next,prevFn=API.prev,prepareTxFn=API.prepareTx,type=$.type(opts.progressive),slides,scriptEl;if("array"===type)slides=opts.progressive;else if($.isFunction(opts.progressive))slides=opts.progressive(opts);else if("string"===type){if(scriptEl=$(opts.progressive),slides=$.trim(scriptEl.html()),!slides)return;if(/^(\[)/.test(slides))try{slides=$.parseJSON(slides)}catch(err){return void API.log("error parsing progressive slides",err)}else slides=slides.split(new RegExp(scriptEl.data("cycle-split")||"\n")),slides[slides.length-1]||slides.pop()}prepareTxFn&&(API.prepareTx=function(manual,fwd){var index,slide;return manual||0===slides.length?void prepareTxFn.apply(opts.API,[manual,fwd]):void(fwd&&opts.currSlide===opts.slideCount-1?(slide=slides[0],slides=slides.slice(1),opts.container.one("cycle-slide-added",function(e,opts){setTimeout(function(){opts.API.advanceSlide(1)},50)}),opts.API.add(slide)):fwd||0!==opts.currSlide?prepareTxFn.apply(opts.API,[manual,fwd]):(index=slides.length-1,slide=slides[index],slides=slides.slice(0,index),opts.container.one("cycle-slide-added",function(e,opts){setTimeout(function(){opts.currSlide=1,opts.API.advanceSlide(-1)},50)}),opts.API.add(slide,!0)))}),nextFn&&(API.next=function(){var opts=this.opts();if(slides.length&&opts.currSlide===opts.slideCount-1){var slide=slides[0];slides=slides.slice(1),opts.container.one("cycle-slide-added",function(e,opts){nextFn.apply(opts.API),opts.container.removeClass("cycle-loading")}),opts.container.addClass("cycle-loading"),opts.API.add(slide)}else nextFn.apply(opts.API)}),prevFn&&(API.prev=function(){var opts=this.opts();if(slides.length&&0===opts.currSlide){var index=slides.length-1,slide=slides[index];slides=slides.slice(0,index),opts.container.one("cycle-slide-added",function(e,opts){opts.currSlide=1,opts.API.advanceSlide(-1),opts.container.removeClass("cycle-loading")}),opts.container.addClass("cycle-loading"),opts.API.add(slide,!0)}else prevFn.apply(opts.API)})}})}(jQuery),function($){$.extend($.fn.cycle.defaults,{tmplRegex:"{{((.)?.*?)}}"}),$.extend($.fn.cycle.API,{tmpl:function(str,opts){var regex=new RegExp(opts.tmplRegex||$.fn.cycle.defaults.tmplRegex,"g"),args=$.makeArray(arguments);return args.shift(),str.replace(regex,function(_,str){var i,j,obj,prop,names=str.split(".");for(i=0;i<args.length;i++)if(obj=args[i]){if(names.length>1)for(prop=obj,j=0;j<names.length;j++)obj=prop,prop=prop[names[j]]||str;else prop=obj[str];if($.isFunction(prop))return prop.apply(obj,args);if(void 0!==prop&&null!==prop&&prop!==str)return prop}return str})}})}(jQuery),/* ========================================
07. Ensemble Lightbox
By Osvaldas Valutis, www.osvaldas.info
Available for use under the MIT License
@preserve
======================================== */
function($,window,document,undefined){var cssTransitionSupport=function(){var s=document.body||document.documentElement;return s=s.style,""===s.WebkitTransition?"-webkit-":""===s.MozTransition?"-moz-":""===s.OTransition?"-o-":""===s.transition?"":!1},isCssTransitionSupport=cssTransitionSupport()!==!1,cssTransitionTranslateX=function(element,positionX,speed){var options={},prefix=cssTransitionSupport();options[prefix+"transform"]="translateX("+positionX+")",options[prefix+"transition"]=prefix+"transform "+speed+"s linear",element.css(options)},hasTouch="ontouchstart"in window,hasPointers=window.navigator.pointerEnabled||window.navigator.msPointerEnabled,wasTouched=function(event){if(hasTouch)return!0;if(!hasPointers||"undefined"==typeof event||"undefined"==typeof event.pointerType)return!1;if("undefined"!=typeof event.MSPOINTER_TYPE_MOUSE){if(event.MSPOINTER_TYPE_MOUSE!==event.pointerType)return!0}else if("mouse"!==event.pointerType)return!0;return!1};$.fn.ensembleLightbox=function(opts){var options=$.extend({selector:"",id:"ensemble-lightbox",allowedTypes:"png|jpg|jpeg||gif",animationSpeed:250,preloadNext:!0,enableKeyboard:!0,activity:!1,arrows:!1,button:!1,navigation:!1,overlay:!0,caption:!0,quitOnEnd:!1,quitOnImgClick:!1,quitOnDocClick:!0,quitOnEscKey:!0,onStart:function(){options.arrows&&arrowsOn(this),options.navigation&&navigationOn(this,options.selector),options.overlay&&overlayOn(),options.button&&closeButtonOn()},onEnd:function(){options.activity&&activityIndicatorOff(),options.arrows&&arrowsOff(),options.navigation&&navigationOff(),options.overlay&&overlayOff(),options.caption&&captionOff(),options.button&&closeButtonOff()},onLoadStart:function(){options.activity&&activityIndicatorOn(),options.caption&&captionOff()},onLoadEnd:function(){options.activity&&activityIndicatorOff(),options.arrows&&$(".ensemble-lightbox-arrow").css("display","block"),options.navigation&&navigationUpdate(options.selector),options.caption&&captionOn()},previousTarget:function(){return this.previousTargetDefault()},previousTargetDefault:function(){var targetIndex=targets.index(target)-1;if(0>targetIndex){if(options.quitOnEnd===!0)return quitLightbox(),!1;targetIndex=targets.length-1}target=targets.eq(targetIndex)},nextTarget:function(){return this.nextTargetDefault()},nextTargetDefault:function(){var targetIndex=targets.index(target)+1;if(targetIndex>=targets.length){if(options.quitOnEnd===!0)return quitLightbox(),!1;targetIndex=0}target=targets.eq(targetIndex)}},opts),activityIndicatorOn=function(){$('<div class="ensemble-lightbox__loading"><div></div></div>').appendTo("body")},activityIndicatorOff=function(){$(".ensemble-lightbox__loading").remove()},overlayOn=function(){$('<div class="ensemble-lightbox__overlay"></div>').appendTo("body")},overlayOff=function(){$(".ensemble-lightbox__overlay").addClass("ensemble-lightbox__leave"),$(".ensemble-lightbox__overlay").one("animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd",function(){$(".ensemble-lightbox__overlay").remove()})},closeButtonOn=function(){$('<a href="#" class="ensemble-lightbox__close"></a>').appendTo("body").on("click",function(){return $(this).remove(),quitLightbox(),!1})},closeButtonOff=function(){$(".ensemble-lightbox__close").remove()},captionOn=function(){var altTxt=target.attr("data-caption");target.attr("data-caption")!==undefined&&$('<div class="ensemble-lightbox__caption">'+altTxt+"</div>").appendTo("body")},captionOff=function(){$(".ensemble-lightbox__caption").remove()},navigationOn=function(instance,selector){var images=$(selector);if(images.length){for(var nav=$('<div class="ensemble-lightbox__nav"></div>'),i=0;i<images.length;i++)nav.append('<a href="#"></a>');nav.appendTo("body"),nav.on("click touchend",function(){return!1});var navItems=nav.find("a");navItems.on("click touchend",function(){var $this=$(this);if(images.eq($this.index()).attr("href")!==$(".ensemble-lightbox").attr("src")){var tmpTarget=targets.eq($this.index());if(tmpTarget.length){var currentIndex=targets.index(target);target=tmpTarget,loadImage($this.index()<currentIndex?"left":"right")}}return navItems.removeClass("active"),navItems.eq($this.index()).addClass("active"),!1}).on("touchend",function(){return!1})}},navigationUpdate=function(selector){var items=$(".ensemble-lightbox__nav").find("a");items.removeClass("active"),items.eq($(selector).filter('[href="'+$(".ensemble-lightbox").attr("src")+'"]').index(selector)).addClass("active")},navigationOff=function(){$(".ensemble-lightbox__nav").remove()},arrowsOn=function(instance){var $arrows=$('<a href="#" class="ensemble-lightbox__arrow ensemble-lightbox__arrow-left"></a><a href="#" class="ensemble-lightbox__arrow ensemble-lightbox__arrow-right"></button>');$arrows.appendTo("body"),$arrows.on("click touchend",function(e){return e.preventDefault(),$(this).hasClass("ensemble-lightbox__arrow-left")?loadPreviousImage(instance):loadNextImage(instance),!1})},arrowsOff=function(){$(".ensemble-lightbox__arrow").remove()},targets=$([]),target=$(),image=$(),imageWidth=0,imageHeight=0,swipeDiff=0,inProgress=!1,isTargetValid=function(element){var classic="a"===$(element).prop("tagName").toLowerCase()&&new RegExp(".("+options.allowedTypes+")$","i").test($(element).attr("href")),html5=$(element).attr("data-lightbox")!==undefined;return classic||html5},setImage=function(){if(!image.length)return!0;var screenWidth=.8*$(window).width(),screenHeight=.9*$(window).height(),tmpImage=new Image;tmpImage.src=image.attr("src"),tmpImage.onload=function(){if(imageWidth=tmpImage.width,imageHeight=tmpImage.height,imageWidth>screenWidth||imageHeight>screenHeight){var ratio=imageWidth/imageHeight>screenWidth/screenHeight?imageWidth/screenWidth:imageHeight/screenHeight;imageWidth/=ratio,imageHeight/=ratio}image.css({width:imageWidth+"px",height:imageHeight+"px",top:($(window).height()-imageHeight)/2+"px",left:($(window).width()-imageWidth)/2+"px"})}},loadImage=function(direction){if(inProgress)return!1;if(direction="undefined"==typeof direction?!1:"left"===direction?1:-1,image.length){var params={opacity:0};isCssTransitionSupport?cssTransitionTranslateX(image,100*direction-swipeDiff+"px",options.animationSpeed/1e3):params.left=parseInt(image.css("left"))+100*direction+"px",image.animate(params,options.animationSpeed,function(){removeImage()}),swipeDiff=0}inProgress=!0,options.onLoadStart!==!1&&options.onLoadStart(),setTimeout(function(){var imgPath=target.attr("href"),altTxt=target.attr("data-caption");console.log(target),options.caption&&captionOff(),image=$('<img class="ensemble-lightbox__image '+options.id+'" alt="'+altTxt+'" />').attr("src",imgPath).load(function(){var params={opacity:1};if(image.appendTo("body"),setImage(),image.css("opacity",0),isCssTransitionSupport)cssTransitionTranslateX(image,-100*direction+"px",0),setTimeout(function(){cssTransitionTranslateX(image,"0px",options.animationSpeed/1e3)},50);else{var imagePosLeft=parseInt(image.css("left"));params.left=imagePosLeft+"px",image.css("left",imagePosLeft-100*direction+"px")}if(image.animate(params,options.animationSpeed,function(){inProgress=!1,options.onLoadEnd!==!1&&options.onLoadEnd()}),options.preloadNext){var nextTarget=targets.eq(targets.index(target)+1);nextTarget.length||(nextTarget=targets.eq(0)),$("<img />").attr("src",nextTarget.attr("href")).load()}}).error(function(){options.onLoadEnd!==!1&&options.onLoadEnd()});var swipeStart=0,swipeEnd=0,imagePosLeft=0;image.on(hasPointers?"pointerup MSPointerUp":"click",function(e){if(e.preventDefault(),options.quitOnImgClick)return quitLightbox(),!1;if(wasTouched(e.originalEvent))return!0;var posX=(e.pageX||e.originalEvent.pageX)-e.target.offsetLeft;imageWidth/2>posX?loadPreviousImage():loadNextImage()}).on("touchstart pointerdown MSPointerDown",function(e){return!wasTouched(e.originalEvent)||options.quitOnImgClick?!0:(isCssTransitionSupport&&(imagePosLeft=parseInt(image.css("left"))),void(swipeStart=e.originalEvent.pageX||e.originalEvent.touches[0].pageX))}).on("touchmove pointermove MSPointerMove",function(e){return!wasTouched(e.originalEvent)||options.quitOnImgClick?!0:(e.preventDefault(),swipeEnd=e.originalEvent.pageX||e.originalEvent.touches[0].pageX,swipeDiff=swipeStart-swipeEnd,void(isCssTransitionSupport?cssTransitionTranslateX(image,-swipeDiff+"px",0):image.css("left",imagePosLeft-swipeDiff+"px")))}).on("touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel",function(e){return!wasTouched(e.originalEvent)||options.quitOnImgClick?!0:void(Math.abs(swipeDiff)>50?0>swipeDiff?loadPreviousImage():loadNextImage():isCssTransitionSupport?cssTransitionTranslateX(image,"0px",options.animationSpeed/1e3):image.animate({left:imagePosLeft+"px"},options.animationSpeed/2))})},options.animationSpeed+100)},loadPreviousImage=function(){options.previousTarget()!==!1&&loadImage("left")},loadNextImage=function(){options.nextTarget()!==!1&&loadImage("right")},removeImage=function(){return image.length?(image.remove(),void(image=$())):!1},quitLightbox=function(){return image.length?void image.animate({opacity:0},options.animationSpeed,function(){removeImage(),inProgress=!1,options.onEnd!==!1&&options.onEnd()}):!1};return $(window).on("resize",setImage),options.quitOnDocClick&&$(document).on(hasTouch?"touchend":"click",function(e){image.length&&!$(e.target).is(image)&&(e.preventDefault(),quitLightbox())}),options.enableKeyboard&&$(document).on("keyup",function(e){return image.length?(e.preventDefault(),27===e.keyCode&&options.quitOnEscKey===!0&&quitLightbox(),void(37===e.keyCode?loadPreviousImage():39===e.keyCode&&loadNextImage())):!0}),this.startImageLightbox=function(e){return isTargetValid(this)?(e!==undefined&&e.preventDefault(),inProgress?!1:(inProgress=!1,options.onStart!==!1&&options.onStart(),target=$(this),void loadImage())):!0},$(document).off("click",this.selector),$(document).on("click",this.selector,this.startImageLightbox),this.each(function(){return isTargetValid(this)?void(targets=targets.add($(this))):!0}),this.loadPreviousImage=function(){loadPreviousImage()},this.loadNextImage=function(){loadNextImage()},this.quitImageLightbox=function(){return quitLightbox(),this},this.addImageLightbox=function(elements){return elements.each(function(){return isTargetValid(this)?void(targets=targets.add($(this))):!0}),elements.on("click",this.startImageLightbox),this},this}}(jQuery,window,document),/* ========================================
11. Ensemble modal
Copyright Ensemble framework
@preserve
======================================== */
function($,window,document,undefined){$.fn.ensembleModal=function(options){var opts=$.extend({delay:"8000",clickOverlayClosing:"false"},options),$modal=this,animSpeed=300;return"true"===opts.clickOverlayClosing&&$modal.on("click",function(e){e.target===this&&$modal.fadeOut(animSpeed)}),$modal.hasClass("modal-timed-open")&&setTimeout(function(){$(".modal-timed-open.modal").fadeIn(animSpeed)},opts.delay),$modal.hasClass("modal-toggle")&&$(".modal-open").on("click",function(e){e.preventDefault(),$(".modal.modal-toggle").fadeIn(animSpeed)}),$(".modal").on("click",".modal-close",function(){$modal.fadeOut(animSpeed)}),$modal}}(jQuery,window,document),/* ========================================
09. Ensemble Accordion
Copyright Ensemble framework
@preserve
======================================== */
function($,window,document,undefined){$.fn.ensembleAccordion=function(options){var opts=$.extend({beginOpen:"false"},options),$accordion=this;return"true"===opts.beginOpen&&$(".accordion__content:first").slideDown(300),$accordion.find(".accordion__header").on("click",function(){$(".accordion__header").next(".accordion__content").is(":visible")?$(".accordion__content").slideUp(300).prev(".accordion__header").removeClass("accordion__active"):($(".accordion__content").slideUp(300).prev(".accordion__header").removeClass("accordion__active"),$(this).next(".accordion__content").slideDown(300).prev(".accordion__header").addClass("accordion__active"))}),$accordion}}(jQuery,window,document),/* ========================================
10. Ensemble draws
Copyright Ensemble framework
@preserve
======================================== */
function($,window,document,undefined){$.fn.ensembleDraws=function(){var $draws=this;return $(".draw").on("click",".draw__header",function(){$(this).next(".draw__content").is(":visible")?$(".draw__content").slideUp(300).prev(".draw__header").removeClass("draw--active"):($(".draw__content").slideUp(300).prev(".draw__header").removeClass("draw--active"),$(this).next(".draw__content").slideDown(300).prev(".draw__header").addClass("draw--active"))}),$draws}}(jQuery,window,document),/* ========================================
10. Ensemble tabs
Copyright Ensemble framework
@preserve
======================================== */
function($,window,document,undefined){$.fn.ensembleTabs=function(){var $tabs=this;return $(".list").on("click",".list-item--tabs",function(){var tabId=$(this).attr("data-tab");$(".list-item--tabs").removeClass("current-list-tab"),$(".tabs__content").removeClass("current-content-tab"),$(this).addClass("current-list-tab"),$("#"+tabId).addClass("current-content-tab")}),$tabs}}(jQuery,window,document),/* ========================================
11. Ensemble notices
Copyright Ensemble framework
@preserve
======================================== */
function($,window,document,undefined){$.fn.ensembleNotices=function(options){var opts=$.extend({delay:"8000"},options),$notices=this;return $(".notice").hasClass("notice--timed")&&setTimeout(function(){$(".notice").fadeIn(300)},opts.delay),$(".notice").on("click",".notice__close",function(){$(".notice").fadeOut(300)}),$notices}}(jQuery,window,document);